%% Generated by Sphinx.
\def\sphinxdocclass{report}
\documentclass[letterpaper,10pt,english]{sphinxmanual}
\ifdefined\pdfpxdimen
   \let\sphinxpxdimen\pdfpxdimen\else\newdimen\sphinxpxdimen
\fi \sphinxpxdimen=.75bp\relax

\PassOptionsToPackage{warn}{textcomp}
\usepackage[utf8]{inputenc}
\ifdefined\DeclareUnicodeCharacter
% support both utf8 and utf8x syntaxes
  \ifdefined\DeclareUnicodeCharacterAsOptional
    \def\sphinxDUC#1{\DeclareUnicodeCharacter{"#1}}
  \else
    \let\sphinxDUC\DeclareUnicodeCharacter
  \fi
  \sphinxDUC{00A0}{\nobreakspace}
  \sphinxDUC{2500}{\sphinxunichar{2500}}
  \sphinxDUC{2502}{\sphinxunichar{2502}}
  \sphinxDUC{2514}{\sphinxunichar{2514}}
  \sphinxDUC{251C}{\sphinxunichar{251C}}
  \sphinxDUC{2572}{\textbackslash}
\fi
\usepackage{cmap}
\usepackage[T1]{fontenc}
\usepackage{amsmath,amssymb,amstext}
\usepackage{babel}



\usepackage{times}
\expandafter\ifx\csname T@LGR\endcsname\relax
\else
% LGR was declared as font encoding
  \substitutefont{LGR}{\rmdefault}{cmr}
  \substitutefont{LGR}{\sfdefault}{cmss}
  \substitutefont{LGR}{\ttdefault}{cmtt}
\fi
\expandafter\ifx\csname T@X2\endcsname\relax
  \expandafter\ifx\csname T@T2A\endcsname\relax
  \else
  % T2A was declared as font encoding
    \substitutefont{T2A}{\rmdefault}{cmr}
    \substitutefont{T2A}{\sfdefault}{cmss}
    \substitutefont{T2A}{\ttdefault}{cmtt}
  \fi
\else
% X2 was declared as font encoding
  \substitutefont{X2}{\rmdefault}{cmr}
  \substitutefont{X2}{\sfdefault}{cmss}
  \substitutefont{X2}{\ttdefault}{cmtt}
\fi


\usepackage[Bjarne]{fncychap}
\usepackage{sphinx}

\fvset{fontsize=\small}
\usepackage{geometry}

% Include hyperref last.
\usepackage{hyperref}
% Fix anchor placement for figures with captions.
\usepackage{hypcap}% it must be loaded after hyperref.
% Set up styles of URL: it should be placed after hyperref.
\urlstyle{same}

\usepackage{sphinxmessages}
\setcounter{tocdepth}{0}



\title{ITUCSDB1963 Documentation}
\date{Dec 27, 2019}
\release{}
\author{ITUCSDB1963}
\newcommand{\sphinxlogo}{\vbox{}}
\renewcommand{\releasename}{}
\makeindex
\begin{document}

\pagestyle{empty}
\sphinxmaketitle
\pagestyle{plain}
\sphinxtableofcontents
\pagestyle{normal}
\phantomsection\label{\detokenize{index::doc}}

\begin{quote}\begin{description}
\item[{Team}] \leavevmode
SIS++

\item[{Members}] \leavevmode\begin{itemize}
\item {} 
Berkay Olgun

\item {} 
Uğur Ali Kaplan

\item {} 
Mehmet Altuner

\end{itemize}

\end{description}\end{quote}

\sphinxstylestrong{A student approach to the ITU student information system, with robust and efficient code base. SIS++ is a student information system that keeps tracks the information about the school and shows them.}

Contents:


\chapter{User Guide}
\label{\detokenize{user/index:user-guide}}\label{\detokenize{user/index::doc}}

\section{Parts Implemented by Berkay}
\label{\detokenize{user/berkay:parts-implemented-by-berkay}}\label{\detokenize{user/berkay::doc}}
This page will be providing information on

Instructors
Rooms
Classrooms


\subsection{1. Instructors}
\label{\detokenize{user/berkay:instructors}}
Instructors page visible to all users.

Navigate to Instructors page by clicking the \sphinxstyleemphasis{Instructors} button on the navbar.

In order to perform operation on Instructors, you must login and have permission.
Once those are provided, you are eligible to operate on Instructors in our system and this page should be
visible to you.


\subsubsection{1.1. Adding a New Instructor}
\label{\detokenize{user/berkay:adding-a-new-instructor}}
\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.3]{{forms}.png}
\caption{Super User Page}\label{\detokenize{user/berkay:id1}}\end{figure}

From the blue boxes, pick \sphinxstyleemphasis{Instructors} dropdown form will be opened, provide the necessary information
about the instructor in relative boxes below. Once you have provided all the information, click \sphinxstyleemphasis{Submit}
button to finalize the process and add the instructor.

\begin{sphinxadmonition}{warning}{Warning:}
The room of an instructor must exist before it’s instructor.
\end{sphinxadmonition}


\subsubsection{1.2. Updating an Existing Instructor}
\label{\detokenize{user/berkay:updating-an-existing-instructor}}
From the checkboxes, pick one and hit the button \sphinxstyleemphasis{UPDATE}. Then, change the information that
you would like to update and then click \sphinxstyleemphasis{Update} button to end the process and update the Instructor.

\begin{sphinxadmonition}{tip}{Tip:}
If you check more than one boxes you update only the first one with that operation
\end{sphinxadmonition}

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.3]{{instructors_update}.png}
\caption{Instructor Update Page}\label{\detokenize{user/berkay:id2}}\end{figure}


\subsubsection{1.3. Viewing and Deleting Existing Instructors}
\label{\detokenize{user/berkay:viewing-and-deleting-existing-instructors}}
To view the instructors come to the page instructors. If you want to delete them,
then, check the checkboxes that you want delete and press the \sphinxstyleemphasis{DELETE} button to
end the process and delete the given Instructor.

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.3]{{instructors}.png}
\caption{Instructors Page}\label{\detokenize{user/berkay:id3}}\end{figure}


\subsection{2. Rooms}
\label{\detokenize{user/berkay:rooms}}
Navigate to Rooms Companies page by clicking the \sphinxstyleemphasis{Rooms} button on the navbar.

\begin{sphinxadmonition}{note}{Note:}
Rooms are only visible in navbar to admins.
\end{sphinxadmonition}

In order to perform operation on rooms or see the buttons, you must login and have permission.
Once those are provided, you are eligible to operate on Rooms in our system and this page should be
visible to you.

\begin{sphinxadmonition}{tip}{Tip:}
The word room is used like a synonym to a place in this application.
\end{sphinxadmonition}

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.3]{{rooms}.png}
\caption{Rooms Page}\label{\detokenize{user/berkay:id4}}\end{figure}


\subsubsection{2.1. Adding a New Room}
\label{\detokenize{user/berkay:adding-a-new-room}}
\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.3]{{forms}.png}
\caption{Super User Page}\label{\detokenize{user/berkay:id5}}\end{figure}

From the blue boxes, pick \sphinxstyleemphasis{Room} dropdown form will be opened, provide the necessary information
about the room in relative boxes below. Once you have provided all the information, click \sphinxstyleemphasis{Submit}
button to finalize the process and add the room.


\subsubsection{2.2. Updating an Existing Room}
\label{\detokenize{user/berkay:updating-an-existing-room}}
From the checkboxes, pick one and hit the button \sphinxstyleemphasis{UPDATE}. Then, change the information that
you would like to update and then click \sphinxstyleemphasis{Update} button to end the process and update the Room.

\begin{sphinxadmonition}{tip}{Tip:}
If you check more than one boxes you update only the first one
\end{sphinxadmonition}

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.3]{{rooms_update}.png}
\caption{Rooms Update}\label{\detokenize{user/berkay:id6}}\end{figure}


\subsubsection{2.3. Viewing and Deleting Existing Rooms}
\label{\detokenize{user/berkay:viewing-and-deleting-existing-rooms}}
To view the Rooms come to the page Rooms. If you want to delete them,
then, check the checkboxes that you want delete and press the \sphinxstyleemphasis{DELETE} button to
end the process and delete the given Room.

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.3]{{rooms_admin}.png}
\caption{Rooms}\label{\detokenize{user/berkay:id7}}\end{figure}


\subsection{3. Classrooms}
\label{\detokenize{user/berkay:classrooms}}
Navigate to Classrooms Companies page by clicking the \sphinxstyleemphasis{Classrooms} button on the navbar.

\begin{sphinxadmonition}{note}{Note:}
Classrooms are only visible in navbar to admins.
\end{sphinxadmonition}

In order to perform operation on rooms or see the buttons, you must login and have permission.
Once those are provided, you are eligible to operate on Rooms in our system and this page should be
visible to you.


\subsubsection{3.1. Adding a New Classroom}
\label{\detokenize{user/berkay:adding-a-new-classroom}}
\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.3]{{forms}.png}
\caption{Super User Page}\label{\detokenize{user/berkay:id8}}\end{figure}

From the blue boxes, pick \sphinxstyleemphasis{Classroom} dropdown form will be opened, provide the necessary information
about the instructor in relative boxes below. Once you have provided all the information, click \sphinxstyleemphasis{Submit}
button to finalize the process and add the Classroom.


\subsubsection{3.2. Updating an Existing Classroom}
\label{\detokenize{user/berkay:updating-an-existing-classroom}}
From the checkboxes, pick one and hit the button \sphinxstyleemphasis{UPDATE}. Then, change the information that
you would like to update and then click \sphinxstyleemphasis{Update} button to end the process and update the Classroom.

\begin{sphinxadmonition}{tip}{Tip:}
If you check more than one boxes you update only the first one
\end{sphinxadmonition}

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.3]{{classrooms_update}.png}
\caption{Classroom Update}\label{\detokenize{user/berkay:id9}}\end{figure}


\subsubsection{3.3. Viewing and Deleting Existing Classrooms}
\label{\detokenize{user/berkay:viewing-and-deleting-existing-classrooms}}
To view the Classrooms come to the page Classrooms. If you want to delete them,
then, check the checkboxes that you want delete and press the \sphinxstyleemphasis{DELETE} button to
end the process and delete the given Classroom.

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.3]{{classrooms}.png}
\caption{Classrooms Page}\label{\detokenize{user/berkay:id10}}\end{figure}


\section{Parts Implemented by Uğur Ali Kaplan}
\label{\detokenize{user/kaplan:parts-implemented-by-ugur-ali-kaplan}}\label{\detokenize{user/kaplan::doc}}
Here, you will be able to find information about how to interact
with different pages of our website, SİS++ using various web forms.

Focus of this document is going to be these pages:
\begin{itemize}
\item {} 
Papers

\item {} 
Labs

\item {} 
Faculties

\item {} 
Departments

\item {} 
Clubs

\item {} 
Buildings

\item {} 
Assistants

\end{itemize}

Actually, all of these have the same logic. So, if you understand how
to use one, you will be able to understand how to use the others except
for the form you have to use when dealing with papers.

So, first two entries will be explained in detail and rest will be a series
of screenshoots since there is no new information to add and it would make
a really redundant documentation.

Let’s start with the complicated one, papers.


\subsection{Papers}
\label{\detokenize{user/kaplan:papers}}
Papers, as you can guess from its name lets you learn about various
authors and their papers.

If you were to go into papers page, you will see a box that asks you
to pick an author. Then, if a name in the database has papers, you will
be able to see their names in this list and learn more about their papers.

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.7]{{papers}.png}
\caption{Picking author}\label{\detokenize{user/kaplan:id1}}\end{figure}

If a person does not have a paper registered in the database, you will not
be able to see their name in this list.

After picking an author, you can see their papers listed as shown here:

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.7]{{papersule}.png}
\caption{Papers by author}\label{\detokenize{user/kaplan:id2}}\end{figure}

Now, you can pick an entry from this table and hit delete or update. If you
hit delete and you have multiple authors, you will see that paper is still in
the database yet its authors does not include the author you have used to
reach this listing.

As an example, let’s say you choose “Uğur Ali Kaplan” as the author. And you
pick a paper, with authors “Uğur Ali Kaplan”, “Berkay Olgun” and “Mehmet Altuner”.
If you delete this paper, now when you pick “Berkay Olgun” as the author, you will
still be able to see the paper. What is different is however, that you will not
see “Uğur Ali Kaplan”s name listed along names of “Berkay Olgun” and “Mehmet Altuner”.

Other than that, if you choose to update the papers, you will meet with a screen
such as the one below:

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.7]{{updatepaper}.png}
\caption{Updating papers}\label{\detokenize{user/kaplan:id3}}\end{figure}

As in the case of deleting, changes you make in paper updates are local. So, if you change the name
of the paper, name of the paper will only be different for this author and other entries
will not be affected.

As it is the case for all the other tables, if you wish to create an entry for papers you
will have to use the super user page.

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.7]{{papercreate}.png}
\caption{Creating papers}\label{\detokenize{user/kaplan:id4}}\end{figure}

If you fill the form and hit create, new entry will be created. In this case, you can choose any person
that has an entry in the database. If your database do not have an entry for the person you want to
attribute the paper to, you have to create a person for it. Details of how to create a person can be found
in other pages of this documentation.


\subsection{Labs}
\label{\detokenize{user/kaplan:labs}}
You can see, update and delete labs in the university from labs page. Also, if you wish to create a new lab,
you can use the super user page.

When you enter into labs page, you will see the following:

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.7]{{labsl}.png}
\caption{Labs page}\label{\detokenize{user/kaplan:id5}}\end{figure}

You can pick one of the labs and hit delete or update. Delete is as straigthforward as it goes, it deletes the
chosen entry. Be careful, because there is no “Are you sure?” popping out in our system, we trust you.

If you wish to update the entries, again you can choose the entry you want to update and you will see a similar
page to the image below:

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.7]{{labu}.png}
\caption{Updating labs}\label{\detokenize{user/kaplan:id6}}\end{figure}

You can enter update the information and hit the update button.

To create a new lab never seen before, as opposed to update one, you have to use the super user page.
In the super user page, find the one that says “Lab Creation Form” and create a new lab by clicking
the “Create” button after filling the necessary information.

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.7]{{labcreate}.png}
\caption{Creating labs}\label{\detokenize{user/kaplan:id7}}\end{figure}


\subsection{Faculties}
\label{\detokenize{user/kaplan:faculties}}
You can list the faculties under the faculties page. From this page, you can also delete or update
the entries you choose.

To create a new faculty, you have to go to the super user page.

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.7]{{facr}.png}
\caption{Creating faculties}\label{\detokenize{user/kaplan:id8}}\end{figure}

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.7]{{facultiesl}.png}
\caption{Faculties page}\label{\detokenize{user/kaplan:id9}}\end{figure}

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.7]{{facultyu}.png}
\caption{Updating faculties}\label{\detokenize{user/kaplan:id10}}\end{figure}


\subsection{Departments}
\label{\detokenize{user/kaplan:departments}}
You can list the departments under the departments page. From this page, you can also delete or update
the entries you choose.

To create a new department, you have to go to the super user page.

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.7]{{departmentcr}.png}
\caption{Creating departments}\label{\detokenize{user/kaplan:id11}}\end{figure}

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.7]{{departmentsl}.png}
\caption{Departments page}\label{\detokenize{user/kaplan:id12}}\end{figure}

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.7]{{departmentu}.png}
\caption{Updating departments}\label{\detokenize{user/kaplan:id13}}\end{figure}


\subsection{Clubs}
\label{\detokenize{user/kaplan:clubs}}
You can list the clubs under the faculties page. From this page, you can also delete or update
the entries you choose.

To create a new club, you have to go to the super user page.

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.7]{{clubcr}.png}
\caption{Creating clubs}\label{\detokenize{user/kaplan:id14}}\end{figure}

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.7]{{clubsl}.png}
\caption{Clubs page}\label{\detokenize{user/kaplan:id15}}\end{figure}

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.7]{{clubsu}.png}
\caption{Updating clubs}\label{\detokenize{user/kaplan:id16}}\end{figure}


\subsection{Buildings}
\label{\detokenize{user/kaplan:buildings}}
You can list the faculties under the buildings page. From this page, you can also delete or update
the entries you choose.

To create a new building, you have to go to the super user page.

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.7]{{buildingcr}.png}
\caption{Creating buildings}\label{\detokenize{user/kaplan:id17}}\end{figure}

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.7]{{buildingslist}.png}
\caption{Buildings page}\label{\detokenize{user/kaplan:id18}}\end{figure}

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.7]{{buildingsupdate}.png}
\caption{Updating buildings}\label{\detokenize{user/kaplan:id19}}\end{figure}


\subsection{Assistants}
\label{\detokenize{user/kaplan:assistants}}
You can list the faculties under the assistants page. From this page, you can also delete or update
the entries you choose.

To create a new assistant, you have to go to the super user page.

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.7]{{ascr}.png}
\caption{Creating assistants}\label{\detokenize{user/kaplan:id20}}\end{figure}

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.7]{{assistantslist}.png}
\caption{Assistants page}\label{\detokenize{user/kaplan:id21}}\end{figure}

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.7]{{assistantupdate}.png}
\caption{Updating assistants}\label{\detokenize{user/kaplan:id22}}\end{figure}


\section{Parts Implemented by Mehmet Altuner}
\label{\detokenize{user/mehmet:parts-implemented-by-mehmet-altuner}}\label{\detokenize{user/mehmet::doc}}
This page will be providing information on

People
Students
Lessons


\subsection{1. People}
\label{\detokenize{user/mehmet:people}}
People table is the base model that students, lecturers, assistants are inherited from.


\subsubsection{1.1. Adding a New Instructor}
\label{\detokenize{user/mehmet:adding-a-new-instructor}}
\begin{figure}[htbp]
\centering

\noindent\sphinxincludegraphics{{supage}.png}
\end{figure}
\begin{quote}\begin{description}
\item[{scale}] \leavevmode
30 \%

\item[{alt}] \leavevmode
Super User Page

\item[{align}] \leavevmode
center

Super User Page

\end{description}\end{quote}

This page contains bunch of html forms that makes super user be able to create entities. You cannot directly create a person object but students, instructors etc. will create a user before creating People object.


\subsubsection{1.2. Updating an Existing People Object}
\label{\detokenize{user/mehmet:updating-an-existing-people-object}}
If you are logged in as a super user account, you can update the information of the people you have selected.

\begin{sphinxadmonition}{tip}{Tip:}
If you check more than one boxes you update only the first one with that operation
\end{sphinxadmonition}

\begin{sphinxadmonition}{tip}{Tip:}
Since you cannot update person object themselves, student update page is shown as an example
\end{sphinxadmonition}

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.3]{{studentupdate}.png}
\caption{Student Update Page}\label{\detokenize{user/mehmet:id1}}\end{figure}


\subsubsection{1.3. Viewing and Deleting Existing People}
\label{\detokenize{user/mehmet:viewing-and-deleting-existing-people}}
If you are logged in as a super user account, you can delete the people you have selected.

\begin{sphinxadmonition}{tip}{Tip:}
If you check more than one boxes you can delete all the objects you selected
\end{sphinxadmonition}

\begin{sphinxadmonition}{tip}{Tip:}
Since you cannot delete person object themselves, student update page is shown as an example
\end{sphinxadmonition}

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.3]{{studentupdate}.png}
\caption{Student Delete Page}\label{\detokenize{user/mehmet:id2}}\end{figure}


\subsection{2. Students}
\label{\detokenize{user/mehmet:students}}
Navigate to Students page by clicking the \sphinxstyleemphasis{Student} button on the navbar.

\begin{figure}[htbp]
\centering

\noindent\sphinxincludegraphics{{studentupdate}.png}
\end{figure}
\begin{quote}\begin{description}
\item[{scale}] \leavevmode
30 \%

\item[{alt}] \leavevmode
Students Page

\item[{align}] \leavevmode
center

\end{description}\end{quote}

Students Page


\subsubsection{2.1. Adding a New Student}
\label{\detokenize{user/mehmet:adding-a-new-student}}
In order to add a new student, you must be logged in as an admin user. After logging in, navigate to the super user page in which you can create new students.

\begin{figure}[htbp]
\centering

\noindent\sphinxincludegraphics[scale=0.3]{{supage}.png}
\end{figure}


\subsubsection{2.2. Updating an Existing Student}
\label{\detokenize{user/mehmet:updating-an-existing-student}}
In the \sphinxstyleemphasis{Students} page, a different UI is shown to admins. Through the select boxes and update button, you can update students.
.. tip:: If you check more than one boxes you update only the first one with that operation

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.3]{{studentupdate}.png}
\caption{Student Update Page}\label{\detokenize{user/mehmet:id3}}\end{figure}


\subsubsection{2.3. Deleting Existing Rooms}
\label{\detokenize{user/mehmet:deleting-existing-rooms}}
In the \sphinxstyleemphasis{Students} page, a different UI is shown to admins. Through the select boxes and delete button, you can delete students.
.. tip:: If you check more than one boxes you delete only the first one with that operation

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.3]{{studentupdate}.png}
\caption{Student Update Page}\label{\detokenize{user/mehmet:id4}}\end{figure}


\subsection{3. Lessons}
\label{\detokenize{user/mehmet:lessons}}
There is not a page in which you can list all of the lessons. Instead, we have implemented a search functionality that students can access in \sphinxstyleemphasis{Enroll} page. You can access to the \sphinxstyleemphasis{Enroll} page from the \sphinxstyleemphasis{Home} page if you are logged in as a student account.

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.3]{{enroll}.png}
\caption{Enroll Page}\label{\detokenize{user/mehmet:id5}}\end{figure}


\subsubsection{3.1. Enrolling}
\label{\detokenize{user/mehmet:enrolling}}
After you get to the \sphinxstyleemphasis{Enroll} page, first thing you need to do is to search for the lessons you want to enroll by either its crn or instructor’s name. If there is enough capacity, you can enroll to lessons by clicking Enroll button. You can also leave the lessons you are already enrolled within the same UI.

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.3]{{enroll}.png}
\caption{Enroll Page}\label{\detokenize{user/mehmet:id6}}\end{figure}


\subsubsection{3.2. Adding a New Lesson}
\label{\detokenize{user/mehmet:adding-a-new-lesson}}
In order to add a new lesson, you must be logged in as an admin user. After logging in, navigate to the super user page in which you can create new lessons.

\begin{figure}[htbp]
\centering

\noindent\sphinxincludegraphics[scale=0.3]{{supage}.png}
\end{figure}


\chapter{Developer Guide}
\label{\detokenize{developer/index:developer-guide}}\label{\detokenize{developer/index::doc}}

\section{Database Design}
\label{\detokenize{developer/index:database-design}}
\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.5]{{er}.png}
\caption{ER diagram of the database}\label{\detokenize{developer/index:id1}}\end{figure}


\section{Code}
\label{\detokenize{developer/index:code}}

\subsection{Parts Implemented by Berkay Olgun}
\label{\detokenize{developer/berkay:parts-implemented-by-berkay-olgun}}\label{\detokenize{developer/berkay::doc}}

\subsubsection{Instructors}
\label{\detokenize{developer/berkay:instructors}}
\begin{sphinxadmonition}{note}{Note:}
All table creations exist in db\_init.py file.
\end{sphinxadmonition}

\begin{sphinxadmonition}{note}{Note:}
All SQL operations in python files are wrapped with try-except statements in order to avoid errors
\end{sphinxadmonition}


\paragraph{1. Creation}
\label{\detokenize{developer/berkay:creation}}
Detailed informations about instructors are kept in tables that it refers.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{CREATE} \PYG{k}{TABLE} \PYG{k}{IF} \PYG{k}{NOT} \PYG{k}{EXISTS} \PYG{n}{INSTRUCTORS}\PYG{p}{(}
    \PYG{n}{INS\PYGZus{}ID} \PYG{n+nb}{INTEGER} \PYG{k}{PRIMARY} \PYG{k}{KEY}\PYG{p}{,}
    \PYG{n}{BACHELORS} \PYG{n+nb}{VARCHAR}\PYG{p}{(}\PYG{l+m+mi}{90}\PYG{p}{)}\PYG{p}{,}
    \PYG{n}{MASTERS} \PYG{n+nb}{VARCHAR}\PYG{p}{(}\PYG{l+m+mi}{90}\PYG{p}{)}\PYG{p}{,}
    \PYG{n}{DOCTORATES} \PYG{n+nb}{VARCHAR}\PYG{p}{(}\PYG{l+m+mi}{90}\PYG{p}{)}\PYG{p}{,}
    \PYG{n}{DEPARTMENT} \PYG{n+nb}{INTEGER}\PYG{p}{,}
    \PYG{n}{ROOM} \PYG{n+nb}{INTEGER} \PYG{k}{UNIQUE}\PYG{p}{,}
    \PYG{n}{LAB} \PYG{n+nb}{INTEGER}\PYG{p}{,}
    \PYG{k}{FOREIGN} \PYG{k}{KEY} \PYG{p}{(}\PYG{n}{DEPARTMENT}\PYG{p}{)} \PYG{k}{REFERENCES} \PYG{n}{DEPARTMENTS}\PYG{p}{(}\PYG{n}{DEP\PYGZus{}ID}\PYG{p}{)} \PYG{k}{ON} \PYG{k}{UPDATE} \PYG{k}{CASCADE} \PYG{k}{ON} \PYG{k}{DELETE} \PYG{k}{SET} \PYG{k}{NULL}\PYG{p}{,}
    \PYG{k}{FOREIGN} \PYG{k}{KEY} \PYG{p}{(}\PYG{n}{ROOM}\PYG{p}{)} \PYG{k}{REFERENCES} \PYG{n}{ROOMS}\PYG{p}{(}\PYG{n}{ROOM\PYGZus{}ID}\PYG{p}{)} \PYG{k}{ON} \PYG{k}{DELETE} \PYG{k}{SET} \PYG{k}{NULL}\PYG{p}{,}
    \PYG{k}{FOREIGN} \PYG{k}{KEY} \PYG{p}{(}\PYG{n}{LAB}\PYG{p}{)} \PYG{k}{REFERENCES} \PYG{n}{LABS}\PYG{p}{(}\PYG{n}{LAB\PYGZus{}ID}\PYG{p}{)} \PYG{k}{ON} \PYG{k}{DELETE} \PYG{k}{SET} \PYG{k}{NULL}\PYG{p}{,}
    \PYG{k}{FOREIGN} \PYG{k}{KEY} \PYG{p}{(}\PYG{n}{INS\PYGZus{}ID}\PYG{p}{)} \PYG{k}{REFERENCES} \PYG{n}{PEOPLE} \PYG{k}{ON} \PYG{k}{DELETE} \PYG{k}{CASCADE}
\PYG{p}{)}
\end{sphinxVerbatim}


\paragraph{2. Adding}
\label{\detokenize{developer/berkay:adding}}
Before adding an instructor if that person is not in table People he/she will be added to people before adding as instructor.
Instructor id references the private key in the People table.

\begin{sphinxadmonition}{warning}{Warning:}
The room of an instructor should be added before it’s instructor.
\end{sphinxadmonition}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{add\PYGZus{}instructor}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{instructor}\PYG{p}{)}\PYG{p}{:}
    \PYG{k}{try}\PYG{p}{:}
        \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
            \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{INSERT INTO INSTRUCTORS (INS\PYGZus{}ID, BACHELORS, MASTERS, DOCTORATES,}
             \PYG{n}{DEPARTMENT}\PYG{p}{,} \PYG{n}{ROOM}\PYG{p}{,} \PYG{n}{LAB}\PYG{p}{)} \PYG{n}{VALUES} \PYG{p}{(}\PYG{o}{\PYGZpc{}}\PYG{n}{s}\PYG{p}{,} \PYG{o}{\PYGZpc{}}\PYG{n}{s}\PYG{p}{,} \PYG{o}{\PYGZpc{}}\PYG{n}{s}\PYG{p}{,} \PYG{o}{\PYGZpc{}}\PYG{n}{s}\PYG{p}{,} \PYG{o}{\PYGZpc{}}\PYG{n}{s}\PYG{p}{,} \PYG{o}{\PYGZpc{}}\PYG{n}{s}\PYG{p}{,} \PYG{o}{\PYGZpc{}}\PYG{n}{s}\PYG{p}{)}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{data} \PYG{o}{=} \PYG{p}{[}\PYG{n}{instructor}\PYG{o}{.}\PYG{n}{instructor\PYGZus{}id}\PYG{p}{,} \PYG{n}{instructor}\PYG{o}{.}\PYG{n}{bachelors}\PYG{p}{,} \PYG{n}{instructor}\PYG{o}{.}\PYG{n}{masters}\PYG{p}{,} \PYG{n}{instructor}\PYG{o}{.}\PYG{n}{doctorates}\PYG{p}{,}
                    \PYG{n}{instructor}\PYG{o}{.}\PYG{n}{department}\PYG{p}{,} \PYG{n}{instructor}\PYG{o}{.}\PYG{n}{room}\PYG{p}{,} \PYG{n}{instructor}\PYG{o}{.}\PYG{n}{lab}\PYG{p}{]}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{data}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
    \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Add Instructor Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
    \PYG{k}{return} \PYG{n}{instructor}
\end{sphinxVerbatim}


\paragraph{3. Reading}
\label{\detokenize{developer/berkay:reading}}
In order to get room name lab name and instructor name join operations must be performed since the tables are in normal form.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{get\PYGZus{}instructors}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{)}\PYG{p}{:}
    \PYG{k}{try}\PYG{p}{:}
        \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
            \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SELECT P\PYGZus{}ID, NAME, ROOMS.ROOM\PYGZus{}NAME, LABS.LAB\PYGZus{}NAME, BACHELORS, MASTERS,}
             \PYG{n}{DOCTORATES} \PYG{n}{FROM} \PYG{n}{INSTRUCTORS} \PYG{n}{JOIN} \PYG{n}{PEOPLE} \PYG{n}{ON} \PYG{p}{(}\PYG{n}{INSTRUCTORS}\PYG{o}{.}\PYG{n}{INS\PYGZus{}ID} \PYG{o}{=} \PYG{n}{PEOPLE}\PYG{o}{.}\PYG{n}{P\PYGZus{}ID}\PYG{p}{)}
              \PYG{n}{JOIN} \PYG{n}{ROOMS} \PYG{n}{ON} \PYG{p}{(}\PYG{n}{INSTRUCTORS}\PYG{o}{.}\PYG{n}{ROOM} \PYG{o}{=} \PYG{n}{ROOMS}\PYG{o}{.}\PYG{n}{ROOM\PYGZus{}ID}\PYG{p}{)}
               \PYG{n}{LEFT} \PYG{n}{JOIN} \PYG{n}{LABS} \PYG{n}{ON} \PYG{p}{(}\PYG{n}{INSTRUCTORS}\PYG{o}{.}\PYG{n}{LAB} \PYG{o}{=} \PYG{n}{LABS}\PYG{o}{.}\PYG{n}{LAB\PYGZus{}ID}\PYG{p}{)}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{)}
            \PYG{n}{datas} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchall}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{retval} \PYG{o}{=} \PYG{p}{[}\PYG{p}{]}
            \PYG{k}{for} \PYG{n}{data} \PYG{o+ow}{in} \PYG{n}{datas}\PYG{p}{:}
                \PYG{n}{val} \PYG{o}{=} \PYG{p}{\PYGZob{}}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ID}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{n}{data}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Name}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{data}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Room}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{data}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{]}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Lab}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{data}\PYG{p}{[}\PYG{l+m+mi}{3}\PYG{p}{]}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Bachelors}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{data}\PYG{p}{[}\PYG{l+m+mi}{4}\PYG{p}{]}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Masters}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{data}\PYG{p}{[}\PYG{l+m+mi}{5}\PYG{p}{]}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Doctorates}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{data}\PYG{p}{[}\PYG{l+m+mi}{6}\PYG{p}{]}
                \PYG{p}{\PYGZcb{}}
                \PYG{n}{retval}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{val}\PYG{p}{)}
            \PYG{k}{return} \PYG{n}{retval}
    \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Get Instructors Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}

    \PYG{k}{return} \PYG{n+nb+bp}{None}
\end{sphinxVerbatim}


\paragraph{4. Updating}
\label{\detokenize{developer/berkay:updating}}
In order to update instructors, characteristic attribute id is enough to filter any of them.
attrs\_lookup\_table is used with attrs and values list in order to restrict naming and ordering attribute confusions.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{update\PYGZus{}instructor}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{ins\PYGZus{}id}\PYG{p}{,} \PYG{n}{attrs}\PYG{p}{,} \PYG{n}{values}\PYG{p}{)}\PYG{p}{:}
\PYG{n}{attrs\PYGZus{}lookup\PYGZus{}table} \PYG{o}{=} \PYG{p}{\PYGZob{}}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{department}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{DEPARTMENT}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{room}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ROOM}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{lab}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{LAB}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{bachelors}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{BACHELORS}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{masters}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{MASTERS}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{doctorates}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{DOCTORATES}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{p}{\PYGZcb{}}

\PYG{k}{try}\PYG{p}{:}
    \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
        \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{UPDATE INSTRUCTORS SET }\PYG{l+s+s2}{\PYGZdq{}}
        \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{attrs}\PYG{p}{)} \PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{:}
            \PYG{k}{print}\PYG{p}{(}\PYG{n}{attrs\PYGZus{}lookup\PYGZus{}table}\PYG{p}{[}\PYG{n}{attrs}\PYG{p}{[}\PYG{n}{i}\PYG{p}{]}\PYG{p}{]} \PYG{o}{+} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{ ,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
            \PYG{n}{statement} \PYG{o}{+}\PYG{o}{=} \PYG{n}{attrs\PYGZus{}lookup\PYGZus{}table}\PYG{p}{[}\PYG{n}{attrs}\PYG{p}{[}\PYG{n}{i}\PYG{p}{]}\PYG{p}{]} \PYG{o}{+} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{ ,}\PYG{l+s+s2}{\PYGZdq{}}
        \PYG{n}{statement} \PYG{o}{+}\PYG{o}{=} \PYG{n}{attrs\PYGZus{}lookup\PYGZus{}table}\PYG{p}{[}\PYG{n}{attrs}\PYG{p}{[}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{]} \PYG{o}{+} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{ WHERE INS\PYGZus{}ID = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}}
        \PYG{n}{values}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{ins\PYGZus{}id}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{values}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}

\PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
    \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Update Instructors Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\end{sphinxVerbatim}


\paragraph{5. Deleting}
\label{\detokenize{developer/berkay:deleting}}
In order to delete an instructor, simple DELETE query is sufficient.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{delete\PYGZus{}instructor}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{ins\PYGZus{}id}\PYG{p}{)}\PYG{p}{:}
\PYG{k}{try}\PYG{p}{:}
    \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
        \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{DELETE FROM INSTRUCTORS WHERE INS\PYGZus{}ID = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}}
        \PYG{n}{values} \PYG{o}{=} \PYG{p}{[}\PYG{n}{ins\PYGZus{}id}\PYG{p}{]}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{values}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
\PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
    \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Delete Instructor Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\end{sphinxVerbatim}


\subsubsection{Rooms}
\label{\detokenize{developer/berkay:rooms}}

\paragraph{1. Creation}
\label{\detokenize{developer/berkay:id1}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{k}{CREATE} \PYG{k}{TABLE} \PYG{k}{IF} \PYG{k}{NOT} \PYG{k}{EXISTS} \PYG{n}{ROOMS} \PYG{p}{(}
    \PYG{n}{ROOM\PYGZus{}ID} \PYG{n+nb}{SERIAL} \PYG{k}{PRIMARY} \PYG{k}{KEY}\PYG{p}{,}
    \PYG{n}{BUILDING} \PYG{n+nb}{INTEGER}\PYG{p}{,}
    \PYG{n}{ROOM\PYGZus{}NAME} \PYG{n+nb}{VARCHAR}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{)} \PYG{k}{UNIQUE} \PYG{k}{NOT} \PYG{k}{NULL}\PYG{p}{,}
    \PYG{n}{AVAILABLE} \PYG{n}{BOOL} \PYG{k}{DEFAULT} \PYG{k}{TRUE}\PYG{p}{,}
    \PYG{k}{CLASS} \PYG{n+nb}{BOOLEAN} \PYG{k}{DEFAULT} \PYG{k}{FALSE}\PYG{p}{,}
    \PYG{n}{LAB} \PYG{n+nb}{BOOLEAN} \PYG{k}{DEFAULT} \PYG{k}{FALSE}\PYG{p}{,}
    \PYG{n}{ROOM} \PYG{n+nb}{BOOLEAN} \PYG{k}{DEFAULT} \PYG{k}{FALSE}\PYG{p}{,}
    \PYG{k}{FOREIGN} \PYG{k}{KEY} \PYG{p}{(}\PYG{n}{BUILDING}\PYG{p}{)} \PYG{k}{REFERENCES} \PYG{n}{BUILDINGS}\PYG{p}{(}\PYG{n}{BU\PYGZus{}ID}\PYG{p}{)} \PYG{k}{ON} \PYG{k}{UPDATE} \PYG{k}{CASCADE} \PYG{k}{ON} \PYG{k}{DELETE} \PYG{k}{CASCADE}
\PYG{p}{)}
\end{sphinxVerbatim}

Building key references the building that room is in.


\paragraph{2. Adding}
\label{\detokenize{developer/berkay:id2}}
\begin{sphinxadmonition}{warning}{Warning:}
Before adding a room a building must exist to refer with a foreign key.
\end{sphinxadmonition}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{add\PYGZus{}room}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{room}\PYG{p}{)}\PYG{p}{:}
\PYG{k}{try}\PYG{p}{:}
    \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
        \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{INSERT INTO ROOMS (BUILDING, ROOM\PYGZus{}NAME, AVAILABLE, CLASS, LAB, ROOM) VALUES (}\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{)}\PYG{l+s+s2}{\PYGZdq{}}
        \PYG{n}{data} \PYG{o}{=} \PYG{p}{[}\PYG{n}{room}\PYG{o}{.}\PYG{n}{building}\PYG{p}{,} \PYG{n}{room}\PYG{o}{.}\PYG{n}{name}\PYG{p}{,} \PYG{n}{room}\PYG{o}{.}\PYG{n}{availability}\PYG{p}{,} \PYG{n}{room}\PYG{o}{.}\PYG{n}{classroom}\PYG{p}{,} \PYG{n}{room}\PYG{o}{.}\PYG{n}{lab}\PYG{p}{,} \PYG{n}{room}\PYG{o}{.}\PYG{n}{room}\PYG{p}{]}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{data}\PYG{p}{)}
        \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SELECT ROOM\PYGZus{}ID FROM ROOMS WHERE ROOM\PYGZus{}NAME = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}}
        \PYG{n}{data} \PYG{o}{=} \PYG{p}{[}\PYG{n}{room}\PYG{o}{.}\PYG{n}{name}\PYG{p}{]}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{data}\PYG{p}{)}
        \PYG{n}{value} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchall}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{room}\PYG{o}{.}\PYG{n}{id} \PYG{o}{=} \PYG{n}{value}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
\PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
    \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Add Room Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\PYG{k}{return} \PYG{n}{room}
\end{sphinxVerbatim}

After adding a room its id is taken to include it in return.


\paragraph{3. Reading}
\label{\detokenize{developer/berkay:id3}}
In order to get the name of the room’s building a join operation must be performed.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{get\PYGZus{}rooms}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{)}\PYG{p}{:}
    \PYG{k}{try}\PYG{p}{:}
        \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
            \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SELECT ROOM\PYGZus{}ID, BU\PYGZus{}NAME, ROOM\PYGZus{}NAME FROM ROOMS JOIN BUILDINGS ON(ROOMS.BUILDING = BUILDINGS.BU\PYGZus{}ID)}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{)}
            \PYG{n}{datas} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchall}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{retval} \PYG{o}{=} \PYG{p}{[}\PYG{p}{]}
            \PYG{k}{for} \PYG{n}{data} \PYG{o+ow}{in} \PYG{n}{datas}\PYG{p}{:}
                \PYG{n}{val} \PYG{o}{=} \PYG{p}{\PYGZob{}}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ID}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{data}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Name}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{data}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{]}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Building}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{data}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}
                \PYG{p}{\PYGZcb{}}
                \PYG{n}{retval}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{val}\PYG{p}{)}
            \PYG{k}{return} \PYG{n}{retval}
    \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Get Rooms Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\end{sphinxVerbatim}

Rooms are returned with a list of dictionaries


\paragraph{4. Updating}
\label{\detokenize{developer/berkay:id4}}
Attributes are taken from the lookup table values and names are compared with given parameters and new values are written on the instance.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{update\PYGZus{}room}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{room\PYGZus{}id}\PYG{p}{,} \PYG{n}{attrs}\PYG{p}{,} \PYG{n}{values}\PYG{p}{)}\PYG{p}{:}
\PYG{n}{attrs\PYGZus{}lookup\PYGZus{}table} \PYG{o}{=} \PYG{p}{\PYGZob{}}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{building}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{BUILDING}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{room\PYGZus{}name}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ROOM\PYGZus{}NAME}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{class}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{CLASS}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{lab}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{LAB}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{room}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ROOM}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{available}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{AVAILABLE}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{p}{\PYGZcb{}}

\PYG{k}{try}\PYG{p}{:}
    \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
        \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{UPDATE ROOMS SET }\PYG{l+s+s2}{\PYGZdq{}}
        \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{attrs}\PYG{p}{)} \PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{:}
            \PYG{n}{statement} \PYG{o}{+}\PYG{o}{=} \PYG{n}{attrs\PYGZus{}lookup\PYGZus{}table}\PYG{p}{[}\PYG{n}{attrs}\PYG{p}{[}\PYG{n}{i}\PYG{p}{]}\PYG{p}{]} \PYG{o}{+} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{ ,}\PYG{l+s+s2}{\PYGZdq{}}
        \PYG{n}{statement} \PYG{o}{+}\PYG{o}{=} \PYG{n}{attrs\PYGZus{}lookup\PYGZus{}table}\PYG{p}{[}\PYG{n}{attrs}\PYG{p}{[}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{]} \PYG{o}{+} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{ WHERE ROOM\PYGZus{}ID = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}}
        \PYG{n}{values}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{room\PYGZus{}id}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{values}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}

\PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
    \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Update Rooms Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\end{sphinxVerbatim}


\paragraph{5. Deleting}
\label{\detokenize{developer/berkay:id5}}
Simple DELETE query with a room id is sufficient to delete any room from the application.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{delete\PYGZus{}room}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{room\PYGZus{}id}\PYG{p}{)}\PYG{p}{:}
\PYG{k}{try}\PYG{p}{:}
    \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
        \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{DELETE FROM ROOMS WHERE room\PYGZus{}id = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}}
        \PYG{n}{values} \PYG{o}{=} \PYG{p}{[}\PYG{n}{room\PYGZus{}id}\PYG{p}{]}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{values}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
\PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
    \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Delete Room Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\end{sphinxVerbatim}


\subsubsection{Classrooms}
\label{\detokenize{developer/berkay:classrooms}}

\paragraph{1. Creation}
\label{\detokenize{developer/berkay:id6}}
Private and foreign key class id refers to the room id that the class in.
.. note:: In our structure every classroom is a (inside a) room.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{k}{CREATE} \PYG{k}{TABLE} \PYG{k}{IF} \PYG{k}{NOT} \PYG{k}{EXISTS} \PYG{n}{CLASSES}\PYG{p}{(}
    \PYG{n}{CL\PYGZus{}ID} \PYG{n+nb}{INTEGER} \PYG{k}{PRIMARY} \PYG{k}{KEY}\PYG{p}{,}
    \PYG{n}{CAP} \PYG{n+nb}{INTEGER} \PYG{k}{NOT} \PYG{k}{NULL}\PYG{p}{,}
    \PYG{k}{TYPE} \PYG{n+nb}{VARCHAR}\PYG{p}{(}\PYG{l+m+mi}{15}\PYG{p}{)} \PYG{k}{DEFAULT} \PYG{l+s+s1}{\PYGZsq{}Lecture\PYGZsq{}}\PYG{p}{,}
    \PYG{n}{AIR\PYGZus{}CONDITIONER} \PYG{n}{BOOL}\PYG{p}{,}
    \PYG{n}{LAST\PYGZus{}RESTORATION} \PYG{n+nb}{VARCHAR}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)}\PYG{p}{,}
    \PYG{n}{BOARD\PYGZus{}TYPE} \PYG{n+nb}{VARCHAR}\PYG{p}{(}\PYG{l+m+mi}{5}\PYG{p}{)} \PYG{k}{DEFAULT} \PYG{l+s+s1}{\PYGZsq{}Mixed\PYGZsq{}}\PYG{p}{,}
    \PYG{k}{FOREIGN} \PYG{k}{KEY} \PYG{p}{(}\PYG{n}{CL\PYGZus{}ID}\PYG{p}{)} \PYG{k}{REFERENCES} \PYG{n}{ROOMS}\PYG{p}{(}\PYG{n}{ROOM\PYGZus{}ID}\PYG{p}{)} \PYG{k}{ON} \PYG{k}{DELETE} \PYG{k}{CASCADE}
\PYG{p}{)}
\end{sphinxVerbatim}


\paragraph{2. Adding}
\label{\detokenize{developer/berkay:id7}}
Before adding a classroom a room is added if not exists, with the proper values.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{add\PYGZus{}classroom}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{classroom}\PYG{p}{)}\PYG{p}{:}
        \PYG{k}{try}\PYG{p}{:}
            \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
                \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
                \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{INSERT INTO CLASSES (CL\PYGZus{}ID, TYPE, AIR\PYGZus{}CONDITIONER, LAST\PYGZus{}RESTORATION, BOARD\PYGZus{}TYPE, CAP) VALUES (}\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{)}\PYG{l+s+s2}{\PYGZdq{}}
                \PYG{n}{data} \PYG{o}{=} \PYG{p}{[}\PYG{n}{classroom}\PYG{o}{.}\PYG{n}{id}\PYG{p}{,} \PYG{n}{classroom}\PYG{o}{.}\PYG{n}{type}\PYG{p}{,} \PYG{n}{classroom}\PYG{o}{.}\PYG{n}{conditioner}\PYG{p}{,} \PYG{n}{classroom}\PYG{o}{.}\PYG{n}{restoration\PYGZus{}date}\PYG{p}{,} \PYG{n}{classroom}\PYG{o}{.}\PYG{n}{board\PYGZus{}type}\PYG{p}{,} \PYG{n}{classroom}\PYG{o}{.}\PYG{n}{cap}\PYG{p}{]}
                \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{data}\PYG{p}{)}
                \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
        \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
            \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Add Classroom Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
        \PYG{k}{return} \PYG{n}{classroom}
\end{sphinxVerbatim}


\paragraph{3. Reading}
\label{\detokenize{developer/berkay:id8}}
Selecting all the values by the name in order to avoid ordering problems when giving them to attributes dictioanary.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{get\PYGZus{}classrooms}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{)}\PYG{p}{:}
    \PYG{k}{try}\PYG{p}{:}
        \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
            \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SELECT CLASSES.CL\PYGZus{}ID, ROOMS.ROOM\PYGZus{}NAME, CLASSES.CAP, CLASSES.TYPE, BUILDINGS.BU\PYGZus{}NAME FROM CLASSES JOIN ROOMS ON CL\PYGZus{}ID = ROOM\PYGZus{}ID JOIN BUILDINGS ON BUILDINGS.BU\PYGZus{}ID = ROOMS.BUILDING}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{)}
            \PYG{n}{datas} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchall}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{retval} \PYG{o}{=} \PYG{p}{[}\PYG{p}{]}
            \PYG{k}{for} \PYG{n}{data} \PYG{o+ow}{in} \PYG{n}{datas}\PYG{p}{:}
                \PYG{n}{val} \PYG{o}{=} \PYG{p}{\PYGZob{}}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ID}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{n}{data}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Name}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{data}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Capacity}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{data}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{]}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Class Type}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{data}\PYG{p}{[}\PYG{l+m+mi}{3}\PYG{p}{]}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Building Name}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{data}\PYG{p}{[}\PYG{l+m+mi}{4}\PYG{p}{]}\PYG{p}{,}
                \PYG{p}{\PYGZcb{}}
                \PYG{n}{retval}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{val}\PYG{p}{)}
            \PYG{k}{return} \PYG{n}{retval}
    \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Get Classrooms Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}

    \PYG{k}{return} \PYG{n+nb+bp}{None}
\end{sphinxVerbatim}


\paragraph{4. Updating}
\label{\detokenize{developer/berkay:id9}}
Same update process is applied to classrooms. Attribute names and their values are given parameters from the form.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{update\PYGZus{}classroom}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{class\PYGZus{}id}\PYG{p}{,} \PYG{n}{attrs}\PYG{p}{,} \PYG{n}{values}\PYG{p}{)}\PYG{p}{:}
\PYG{n}{attrs\PYGZus{}lookup\PYGZus{}table} \PYG{o}{=} \PYG{p}{\PYGZob{}}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{type}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{TYPE}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{air\PYGZus{}conditioner}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{AIR\PYGZus{}CONDITIONER}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{last\PYGZus{}restoration}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{LAST\PYGZus{}RESTORATION}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{board\PYGZus{}type}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{BOARD\PYGZus{}TYPE}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{cap}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{CAP}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{p}{\PYGZcb{}}

\PYG{k}{try}\PYG{p}{:}
    \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
        \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{UPDATE CLASSES SET }\PYG{l+s+s2}{\PYGZdq{}}
        \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{attrs}\PYG{p}{)} \PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{:}
            \PYG{n}{statement} \PYG{o}{+}\PYG{o}{=} \PYG{n}{attrs\PYGZus{}lookup\PYGZus{}table}\PYG{p}{[}\PYG{n}{attrs}\PYG{p}{[}\PYG{n}{i}\PYG{p}{]}\PYG{p}{]} \PYG{o}{+} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{ ,}\PYG{l+s+s2}{\PYGZdq{}}
        \PYG{n}{statement} \PYG{o}{+}\PYG{o}{=} \PYG{n}{attrs\PYGZus{}lookup\PYGZus{}table}\PYG{p}{[}\PYG{n}{attrs}\PYG{p}{[}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{]} \PYG{o}{+} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{ WHERE CL\PYGZus{}ID = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}}
        \PYG{k}{print}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{values}\PYG{p}{)}
        \PYG{n}{values}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{class\PYGZus{}id}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{values}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
\PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
    \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Update Classroom Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\end{sphinxVerbatim}


\paragraph{5. Deleting}
\label{\detokenize{developer/berkay:id10}}
\begin{sphinxadmonition}{note}{Note:}
By the cascade nature if referred room is deleted the classroom is deleted.
\end{sphinxadmonition}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{delete\PYGZus{}classroom}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{cl\PYGZus{}id}\PYG{p}{)}\PYG{p}{:}
\PYG{k}{try}\PYG{p}{:}
    \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
        \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{DELETE FROM CLASSES WHERE CL\PYGZus{}ID = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}}
        \PYG{n}{values} \PYG{o}{=} \PYG{p}{[}\PYG{n}{cl\PYGZus{}id}\PYG{p}{]}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{values}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
\PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
    \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Delete Classroom Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\end{sphinxVerbatim}


\subsection{Parts Implemented by Uğur Ali Kaplan}
\label{\detokenize{developer/kaplan:parts-implemented-by-ugur-ali-kaplan}}\label{\detokenize{developer/kaplan::doc}}

\subsubsection{Assistants}
\label{\detokenize{developer/kaplan:assistants}}

\paragraph{SQL Table Creation}
\label{\detokenize{developer/kaplan:sql-table-creation}}
This is how Assistants table is defined in the database. As we are holding foreign keys, it is impossible to
create an assistant entry before having the right values for foreign key attributes. Related information
about how to create entries for those tables can be found in the other parts of this documentation.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{CREATE} \PYG{k}{TABLE} \PYG{k}{IF} \PYG{k}{NOT} \PYG{k}{EXISTS} \PYG{n}{ASSISTANTS} \PYG{p}{(}
    \PYG{n}{AS\PYGZus{}ID} \PYG{n+nb}{SERIAL} \PYG{k}{PRIMARY} \PYG{k}{KEY}\PYG{p}{,}
    \PYG{n}{AS\PYGZus{}PERSON} \PYG{n+nb}{INTEGER} \PYG{k}{NOT} \PYG{k}{NULL}\PYG{p}{,}
    \PYG{n}{LAB} \PYG{n+nb}{INTEGER}\PYG{p}{,}
    \PYG{n}{DEGREE} \PYG{n+nb}{VARCHAR}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{)}\PYG{p}{,}
    \PYG{n}{DEPARTMENT} \PYG{n+nb}{INTEGER}\PYG{p}{,}
    \PYG{n}{FACULTY} \PYG{n+nb}{INTEGER}\PYG{p}{,}
    \PYG{k}{FOREIGN} \PYG{k}{KEY} \PYG{p}{(}\PYG{n}{AS\PYGZus{}PERSON}\PYG{p}{)} \PYG{k}{REFERENCES} \PYG{n}{PEOPLE}\PYG{p}{(}\PYG{n}{P\PYGZus{}ID}\PYG{p}{)} \PYG{k}{ON} \PYG{k}{UPDATE} \PYG{k}{CASCADE} \PYG{k}{ON} \PYG{k}{DELETE} \PYG{k}{RESTRICT}\PYG{p}{,}
    \PYG{k}{FOREIGN} \PYG{k}{KEY} \PYG{p}{(}\PYG{n}{LAB}\PYG{p}{)} \PYG{k}{REFERENCES} \PYG{n}{LABS}\PYG{p}{(}\PYG{n}{LAB\PYGZus{}ID}\PYG{p}{)} \PYG{k}{ON} \PYG{k}{UPDATE} \PYG{k}{CASCADE} \PYG{k}{ON} \PYG{k}{DELETE} \PYG{k}{RESTRICT}\PYG{p}{,}
    \PYG{k}{FOREIGN} \PYG{k}{KEY} \PYG{p}{(}\PYG{n}{DEPARTMENT}\PYG{p}{)} \PYG{k}{REFERENCES} \PYG{n}{DEPARTMENTS}\PYG{p}{(}\PYG{n}{DEP\PYGZus{}ID}\PYG{p}{)} \PYG{k}{ON} \PYG{k}{UPDATE} \PYG{k}{CASCADE} \PYG{k}{ON} \PYG{k}{DELETE} \PYG{k}{RESTRICT}\PYG{p}{,}
    \PYG{k}{FOREIGN} \PYG{k}{KEY} \PYG{p}{(}\PYG{n}{FACULTY}\PYG{p}{)} \PYG{k}{REFERENCES} \PYG{n}{FACULTIES}\PYG{p}{(}\PYG{n}{FAC\PYGZus{}ID}\PYG{p}{)} \PYG{k}{ON} \PYG{k}{UPDATE} \PYG{k}{CASCADE} \PYG{k}{ON} \PYG{k}{DELETE} \PYG{k}{RESTRICT}
\PYG{p}{)}
\end{sphinxVerbatim}


\paragraph{Assistant Class}
\label{\detokenize{developer/kaplan:assistant-class}}
Since it makes it easier to create, we have defined an assistant class for creating an entry into our database.
Therefore, before adding a new assistant an object of class Assistant must be initialized. Here is the definition of
the Assistant class:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{class} \PYG{n+nc}{Assistant}\PYG{p}{:}
    \PYG{k}{def} \PYG{n+nf+fm}{\PYGZus{}\PYGZus{}init\PYGZus{}\PYGZus{}}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{person}\PYG{p}{,} \PYG{n}{lab}\PYG{p}{,} \PYG{n}{degree}\PYG{p}{,} \PYG{n}{department}\PYG{p}{,} \PYG{n}{faculty}\PYG{p}{)}\PYG{p}{:}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{person} \PYG{o}{=} \PYG{n}{person}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{lab} \PYG{o}{=} \PYG{n}{lab}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{degree} \PYG{o}{=} \PYG{n}{degree}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{department} \PYG{o}{=} \PYG{n}{department}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{faculty} \PYG{o}{=} \PYG{n}{faculty}
\end{sphinxVerbatim}


\paragraph{Adding}
\label{\detokenize{developer/kaplan:adding}}
Adding an assistant into the database is pretty straigthforward. You have to pass the object you have initialized
into add\_assistant() function.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{add\PYGZus{}assistant}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{assistant}\PYG{p}{)}\PYG{p}{:}
     \PYG{k}{try}\PYG{p}{:}
         \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
             \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
             \PYG{n}{data} \PYG{o}{=} \PYG{p}{[}\PYG{n}{assistant}\PYG{o}{.}\PYG{n}{person}\PYG{p}{,} \PYG{n}{assistant}\PYG{o}{.}\PYG{n}{lab}\PYG{p}{,} \PYG{n}{assistant}\PYG{o}{.}\PYG{n}{degree}\PYG{p}{,} \PYG{n}{assistant}\PYG{o}{.}\PYG{n}{department}\PYG{p}{,} \PYG{n}{assistant}\PYG{o}{.}\PYG{n}{faculty}\PYG{p}{]}
             \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{INSERT INTO ASSISTANTS (AS\PYGZus{}PERSON, LAB, DEGREE, DEPARTMENT, FACULTY) VALUES (}\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{)}\PYG{l+s+s2}{\PYGZdq{}}
             \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{data}\PYG{p}{)}
             \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
     \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
         \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Add assistant Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\end{sphinxVerbatim}


\paragraph{Reading}
\label{\detokenize{developer/kaplan:reading}}
It turns out, reading assistants is not as straigthforward as creating an entry. There are multiple options.

\sphinxstylestrong{Option 1: get\_assistant}

get\_assistant takes assistant id as input and returns a dictionary. It also returns assistant’s name, email and photo from people
table.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{get\PYGZus{}assistant}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{as\PYGZus{}id}\PYG{p}{)}\PYG{p}{:}
     \PYG{k}{try}\PYG{p}{:}
         \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
             \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
             \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SELECT (a.as\PYGZus{}id, p.name, p.email, p.photo, a.degree, a.as\PYGZus{}person, a.lab, a.department, a.faculty) FROM assistants a JOIN people p ON a.as\PYGZus{}person = p.p\PYGZus{}id WHERE a.as\PYGZus{}id = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}}
             \PYG{n}{data} \PYG{o}{=} \PYG{p}{[}\PYG{n}{as\PYGZus{}id}\PYG{p}{]}
             \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{data}\PYG{p}{)}
             \PYG{n}{data} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchall}\PYG{p}{(}\PYG{p}{)}
             \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
             \PYG{n}{retval} \PYG{o}{=} \PYG{p}{[}\PYG{p}{]}
             \PYG{k}{for} \PYG{n}{datum} \PYG{o+ow}{in} \PYG{n}{data}\PYG{p}{:}
                 \PYG{n}{datum} \PYG{o}{=} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{o}{.}\PYG{n}{lstrip}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{o}{.}\PYG{n}{rstrip}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{)}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{o}{.}\PYG{n}{split}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
                 \PYG{n}{val} \PYG{o}{=} \PYG{p}{\PYGZob{}}
                     \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ID}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{,}
                     \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Name}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{o}{.}\PYG{n}{strip}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{,}
                     \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Email}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{]}\PYG{o}{.}\PYG{n}{strip}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{,}
                     \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Photo}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{3}\PYG{p}{]}\PYG{o}{.}\PYG{n}{strip}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{,}
                     \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Degree}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{4}\PYG{p}{]}\PYG{o}{.}\PYG{n}{strip}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{,}
                     \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Person}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n+nb}{int}\PYG{p}{(}\PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{5}\PYG{p}{]}\PYG{p}{)}\PYG{p}{,}
                     \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Lab}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n+nb}{int}\PYG{p}{(}\PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{6}\PYG{p}{]}\PYG{p}{)}\PYG{p}{,}
                     \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Dep}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n+nb}{int}\PYG{p}{(}\PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{7}\PYG{p}{]}\PYG{p}{)}\PYG{p}{,}
                     \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Fac}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n+nb}{int}\PYG{p}{(}\PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{8}\PYG{p}{]}\PYG{p}{)}
                 \PYG{p}{\PYGZcb{}}
                 \PYG{n}{retval}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{val}\PYG{p}{)}
             \PYG{k}{return} \PYG{n}{retval}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}
     \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
         \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Get assistant DB Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}

     \PYG{k}{return} \PYG{n+nb+bp}{None}
\end{sphinxVerbatim}

\sphinxstylestrong{Option 2: get\_assistants}

Notice the “s” at the end of the function name. This is used to get all the assistants in the database.
It returns the query result as a list.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{get\PYGZus{}assistants}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{)}\PYG{p}{:}
     \PYG{k}{try}\PYG{p}{:}
         \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
             \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
             \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SELECT * FROM ASSISTANTS JOIN PEOPLE ON (ASSISTANTS.as\PYGZus{}person = PEOPLE.p\PYGZus{}id)}\PYG{l+s+s2}{\PYGZdq{}}
             \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{)}
             \PYG{n}{data} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchall}\PYG{p}{(}\PYG{p}{)}
             \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
             \PYG{k}{return} \PYG{n}{data}
     \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
         \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Delete assistant Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\end{sphinxVerbatim}

\sphinxstylestrong{Option 3: get\_assistant\_info}

This is a combination of get\_assistant and get\_assistants. It returns a list of dictionaries where each dictionary is for an
entry in the assistants table.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{get\PYGZus{}assistant\PYGZus{}info}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{)}\PYG{p}{:}
    \PYG{k}{try}\PYG{p}{:}
        \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
            \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SELECT (a.as\PYGZus{}id, p.name, p.email, p.photo, a.degree) FROM assistants a JOIN people p ON a.as\PYGZus{}person = p.p\PYGZus{}id}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{)}
            \PYG{n}{data} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchall}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{retval} \PYG{o}{=} \PYG{p}{[}\PYG{p}{]}
            \PYG{k}{for} \PYG{n}{datum} \PYG{o+ow}{in} \PYG{n}{data}\PYG{p}{:}
                \PYG{n}{datum} \PYG{o}{=} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{o}{.}\PYG{n}{lstrip}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{o}{.}\PYG{n}{rstrip}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{)}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{o}{.}\PYG{n}{split}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
                \PYG{n}{val} \PYG{o}{=} \PYG{p}{\PYGZob{}}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ID}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Name}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{o}{.}\PYG{n}{strip}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Email}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{]}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Photo}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{3}\PYG{p}{]}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Degree}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{4}\PYG{p}{]}
                \PYG{p}{\PYGZcb{}}
                \PYG{n}{retval}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{val}\PYG{p}{)}
            \PYG{k}{return} \PYG{n}{retval}
    \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Get Assistant Info(The one with the string parsing) DB Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\end{sphinxVerbatim}


\paragraph{Updating}
\label{\detokenize{developer/kaplan:updating}}
To update an assistant, you have to supply assistant id, an attributes list and corresponding values. Then, using
this look-up table, corresponding entry in the database gets updated.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{update\PYGZus{}assistant}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{as\PYGZus{}id}\PYG{p}{,} \PYG{n}{attrs}\PYG{p}{,} \PYG{n}{values}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{attrs\PYGZus{}lookup\PYGZus{}table} \PYG{o}{=} \PYG{p}{\PYGZob{}}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{person}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{AS\PYGZus{}PERSON}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{lab}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{LAB}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{degree}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{DEGREE}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{department}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{DEPARTMENT}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{faculty}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{FACULTY}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
    \PYG{p}{\PYGZcb{}}

    \PYG{k}{try}\PYG{p}{:}
        \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
            \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{UPDATE ASSISTANTS SET }\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{attrs}\PYG{p}{)} \PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{:}
                \PYG{n}{statement} \PYG{o}{+}\PYG{o}{=} \PYG{n}{attrs\PYGZus{}lookup\PYGZus{}table}\PYG{p}{[}\PYG{n}{attrs}\PYG{p}{[}\PYG{n}{i}\PYG{p}{]}\PYG{p}{]} \PYG{o}{+} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{ ,}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{statement} \PYG{o}{+}\PYG{o}{=} \PYG{n}{attrs\PYGZus{}lookup\PYGZus{}table}\PYG{p}{[}\PYG{n}{attrs}\PYG{p}{[}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{]} \PYG{o}{+} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{ WHERE AS\PYGZus{}ID = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{values}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{as\PYGZus{}id}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{values}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}

    \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Update assistant Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\end{sphinxVerbatim}


\paragraph{Deleting}
\label{\detokenize{developer/kaplan:deleting}}
To delete an assistant, you have to supply assistant id.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{delete\PYGZus{}assistant}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{as\PYGZus{}id}\PYG{p}{)}\PYG{p}{:}
    \PYG{k}{try}\PYG{p}{:}
        \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
            \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{DELETE FROM ASSISTANTS WHERE AS\PYGZus{}ID = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{values} \PYG{o}{=} \PYG{p}{[}\PYG{n}{as\PYGZus{}id}\PYG{p}{]}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{values}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
    \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Delete assistant Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\end{sphinxVerbatim}


\subsubsection{Buildings}
\label{\detokenize{developer/kaplan:buildings}}

\paragraph{SQL Table Creation}
\label{\detokenize{developer/kaplan:id1}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{k}{CREATE} \PYG{k}{TABLE} \PYG{k}{IF} \PYG{k}{NOT} \PYG{k}{EXISTS} \PYG{n}{BUILDINGS} \PYG{p}{(}
    \PYG{n}{BU\PYGZus{}ID} \PYG{n+nb}{SERIAL} \PYG{k}{PRIMARY} \PYG{k}{KEY}\PYG{p}{,}
    \PYG{n}{BU\PYGZus{}NAME} \PYG{n+nb}{VARCHAR}\PYG{p}{(}\PYG{l+m+mi}{100}\PYG{p}{)}\PYG{p}{,}
    \PYG{n}{BU\PYGZus{}CODE} \PYG{n+nb}{VARCHAR}\PYG{p}{(}\PYG{l+m+mi}{5}\PYG{p}{)}\PYG{p}{,}
    \PYG{n}{CAMPUS} \PYG{n+nb}{VARCHAR}\PYG{p}{(}\PYG{l+m+mi}{20}\PYG{p}{)}
\PYG{p}{)}
\end{sphinxVerbatim}


\paragraph{Building Class}
\label{\detokenize{developer/kaplan:building-class}}
Since it makes it easier to create, we have defined a building class for creating an entry into our database.
Therefore, before adding a new building an object of class Building must be initialized. Here is the definition of
the Building class:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{class} \PYG{n+nc}{Building}\PYG{p}{:}
    \PYG{k}{def} \PYG{n+nf+fm}{\PYGZus{}\PYGZus{}init\PYGZus{}\PYGZus{}}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{name}\PYG{p}{,} \PYG{n}{code}\PYG{p}{,} \PYG{n}{campus}\PYG{p}{)}\PYG{p}{:}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{name} \PYG{o}{=} \PYG{n}{name}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{code} \PYG{o}{=} \PYG{n}{code}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{campus} \PYG{o}{=} \PYG{n}{campus}
\end{sphinxVerbatim}


\paragraph{Adding}
\label{\detokenize{developer/kaplan:id2}}
Adding a building into the database is pretty straigthforward. You have to pass the object you have initialized
into add\_building() function.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{add\PYGZus{}building}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{building}\PYG{p}{)}\PYG{p}{:}
     \PYG{l+s+sd}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}

\PYG{l+s+sd}{     :param building: A building object}
\PYG{l+s+sd}{     :return:}
\PYG{l+s+sd}{     \PYGZdq{}\PYGZdq{}\PYGZdq{}}
     \PYG{k}{try}\PYG{p}{:}
         \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
             \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
             \PYG{n}{data} \PYG{o}{=} \PYG{p}{[}\PYG{n}{building}\PYG{o}{.}\PYG{n}{name}\PYG{p}{,} \PYG{n}{building}\PYG{o}{.}\PYG{n}{code}\PYG{p}{,} \PYG{n}{building}\PYG{o}{.}\PYG{n}{campus}\PYG{p}{]}
             \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{INSERT INTO BUILDINGS (BU\PYGZus{}NAME, BU\PYGZus{}CODE, CAMPUS) VALUES (}\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{)}\PYG{l+s+s2}{\PYGZdq{}}
             \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{data}\PYG{p}{)}
             \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
     \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
         \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Add Building Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\end{sphinxVerbatim}


\paragraph{Reading}
\label{\detokenize{developer/kaplan:id3}}
There are two functions. One returns a specific entry for the given entry and the other one returns entries for all of the
buildings in the database.

\sphinxstylestrong{get\_building()}

This returns the corresponding query result of the given building id as a list.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{get\PYGZus{}building}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{bu\PYGZus{}id}\PYG{p}{)}\PYG{p}{:}
    \PYG{l+s+sd}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}

\PYG{l+s+sd}{    :param bu\PYGZus{}id: ID of the building in the database}
\PYG{l+s+sd}{    :return:}
\PYG{l+s+sd}{    \PYGZdq{}\PYGZdq{}\PYGZdq{}}
    \PYG{k}{try}\PYG{p}{:}
        \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
            \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SELECT bu\PYGZus{}id, bu\PYGZus{}name, bu\PYGZus{}code, campus FROM BUILDINGS WHERE BU\PYGZus{}ID = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{data} \PYG{o}{=} \PYG{p}{[}\PYG{n}{bu\PYGZus{}id}\PYG{p}{]}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{data}\PYG{p}{)}
            \PYG{n}{data} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchall}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
            \PYG{k}{return} \PYG{n}{data}
    \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Get building DB Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}

    \PYG{k}{return} \PYG{n+nb+bp}{None}
\end{sphinxVerbatim}

\sphinxstylestrong{get\_buildings}

This returns multiple queries as a list of dictionaries.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{get\PYGZus{}buildings}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{)}\PYG{p}{:}
    \PYG{l+s+sd}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}

\PYG{l+s+sd}{    :return: Information as dictionary.}
\PYG{l+s+sd}{    \PYGZdq{}\PYGZdq{}\PYGZdq{}}
    \PYG{k}{try}\PYG{p}{:}
        \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
            \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SELECT * FROM buildings}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{)}
            \PYG{n}{data} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchall}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{retval} \PYG{o}{=} \PYG{p}{[}\PYG{p}{]}
            \PYG{k}{for} \PYG{n}{datum} \PYG{o+ow}{in} \PYG{n}{data}\PYG{p}{:}
                \PYG{n}{val} \PYG{o}{=} \PYG{p}{\PYGZob{}}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ID}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Name}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Code}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{]}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Campus}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{3}\PYG{p}{]}
                \PYG{p}{\PYGZcb{}}
                \PYG{n}{retval}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{val}\PYG{p}{)}
            \PYG{k}{return} \PYG{n}{retval}
    \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Get Buildings DB Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\end{sphinxVerbatim}


\paragraph{Updating}
\label{\detokenize{developer/kaplan:id4}}
To update a building, you have to supply building id, an attributes list and corresponding values. Then, using
this look-up table, corresponding entry in the database gets updated.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{update\PYGZus{}building}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{bu\PYGZus{}id}\PYG{p}{,} \PYG{n}{attrs}\PYG{p}{,} \PYG{n}{values}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{attrs\PYGZus{}lookup\PYGZus{}table} \PYG{o}{=} \PYG{p}{\PYGZob{}}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{name}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{BU\PYGZus{}NAME}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{code}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{BU\PYGZus{}CODE}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{campus}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{CAMPUS}\PYG{l+s+s2}{\PYGZdq{}}
    \PYG{p}{\PYGZcb{}}

    \PYG{k}{try}\PYG{p}{:}
        \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
            \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{UPDATE BUILDINGS SET }\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{attrs}\PYG{p}{)} \PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{:}
                \PYG{n}{statement} \PYG{o}{+}\PYG{o}{=} \PYG{n}{attrs\PYGZus{}lookup\PYGZus{}table}\PYG{p}{[}\PYG{n}{attrs}\PYG{p}{[}\PYG{n}{i}\PYG{p}{]}\PYG{p}{]} \PYG{o}{+} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{ ,}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{statement} \PYG{o}{+}\PYG{o}{=} \PYG{n}{attrs\PYGZus{}lookup\PYGZus{}table}\PYG{p}{[}\PYG{n}{attrs}\PYG{p}{[}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{]} \PYG{o}{+} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{ WHERE BU\PYGZus{}ID = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{values}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{bu\PYGZus{}id}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{values}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}

    \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Update Building Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\end{sphinxVerbatim}


\paragraph{Deleting}
\label{\detokenize{developer/kaplan:id5}}
To delete a building, you have to supply building id.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{delete\PYGZus{}building}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{bu\PYGZus{}id}\PYG{p}{)}\PYG{p}{:}
    \PYG{k}{try}\PYG{p}{:}
        \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
            \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{DELETE FROM BUILDINGS WHERE BU\PYGZus{}ID = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{values} \PYG{o}{=} \PYG{p}{[}\PYG{n}{bu\PYGZus{}id}\PYG{p}{]}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{values}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
    \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Delete building error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\end{sphinxVerbatim}


\subsubsection{Clubs}
\label{\detokenize{developer/kaplan:clubs}}

\paragraph{SQL Table Creation}
\label{\detokenize{developer/kaplan:id6}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{k}{CREATE} \PYG{k}{TABLE} \PYG{k}{IF} \PYG{k}{NOT} \PYG{k}{EXISTS} \PYG{n}{CLUBS} \PYG{p}{(}
    \PYG{n}{CLUB\PYGZus{}ID} \PYG{n+nb}{SERIAL} \PYG{k}{PRIMARY} \PYG{k}{KEY}\PYG{p}{,}
    \PYG{n}{NAME} \PYG{n+nb}{VARCHAR}\PYG{p}{(}\PYG{l+m+mi}{100}\PYG{p}{)} \PYG{k}{NOT} \PYG{k}{NULL}\PYG{p}{,}
    \PYG{n}{FACULTY} \PYG{n+nb}{INTEGER}\PYG{p}{,}
    \PYG{n}{ADVISOR} \PYG{n+nb}{INTEGER}\PYG{p}{,}
    \PYG{n}{CHAIRMAN} \PYG{n+nb}{INTEGER}\PYG{p}{,}
    \PYG{n}{V\PYGZus{}CHAIRMAN\PYGZus{}1} \PYG{n+nb}{INTEGER}\PYG{p}{,}
    \PYG{n}{V\PYGZus{}CHAIRMAN\PYGZus{}2} \PYG{n+nb}{INTEGER}\PYG{p}{,}
    \PYG{k}{FOREIGN} \PYG{k}{KEY} \PYG{p}{(}\PYG{n}{FACULTY}\PYG{p}{)} \PYG{k}{REFERENCES} \PYG{n}{FACULTIES}\PYG{p}{(}\PYG{n}{FAC\PYGZus{}ID}\PYG{p}{)} \PYG{k}{ON} \PYG{k}{UPDATE} \PYG{k}{CASCADE} \PYG{k}{ON} \PYG{k}{DELETE} \PYG{k}{RESTRICT}\PYG{p}{,}
    \PYG{k}{FOREIGN} \PYG{k}{KEY} \PYG{p}{(}\PYG{n}{ADVISOR}\PYG{p}{)} \PYG{k}{REFERENCES} \PYG{n}{PEOPLE}\PYG{p}{(}\PYG{n}{P\PYGZus{}ID}\PYG{p}{)} \PYG{k}{ON} \PYG{k}{UPDATE} \PYG{k}{CASCADE} \PYG{k}{ON} \PYG{k}{DELETE} \PYG{k}{RESTRICT}\PYG{p}{,}
    \PYG{k}{FOREIGN} \PYG{k}{KEY} \PYG{p}{(}\PYG{n}{CHAIRMAN}\PYG{p}{)} \PYG{k}{REFERENCES} \PYG{n}{PEOPLE}\PYG{p}{(}\PYG{n}{P\PYGZus{}ID}\PYG{p}{)} \PYG{k}{ON} \PYG{k}{UPDATE} \PYG{k}{CASCADE} \PYG{k}{ON} \PYG{k}{DELETE} \PYG{k}{RESTRICT}\PYG{p}{,}
    \PYG{k}{FOREIGN} \PYG{k}{KEY} \PYG{p}{(}\PYG{n}{V\PYGZus{}CHAIRMAN\PYGZus{}1}\PYG{p}{)} \PYG{k}{REFERENCES} \PYG{n}{PEOPLE}\PYG{p}{(}\PYG{n}{P\PYGZus{}ID}\PYG{p}{)} \PYG{k}{ON} \PYG{k}{UPDATE} \PYG{k}{CASCADE} \PYG{k}{ON} \PYG{k}{DELETE} \PYG{k}{RESTRICT}\PYG{p}{,}
    \PYG{k}{FOREIGN} \PYG{k}{KEY} \PYG{p}{(}\PYG{n}{V\PYGZus{}CHAIRMAN\PYGZus{}2}\PYG{p}{)} \PYG{k}{REFERENCES} \PYG{n}{PEOPLE}\PYG{p}{(}\PYG{n}{P\PYGZus{}ID}\PYG{p}{)} \PYG{k}{ON} \PYG{k}{UPDATE} \PYG{k}{CASCADE} \PYG{k}{ON} \PYG{k}{DELETE} \PYG{k}{RESTRICT}
\PYG{p}{)}
\end{sphinxVerbatim}


\paragraph{Club Class}
\label{\detokenize{developer/kaplan:club-class}}
Since it makes it easier to create, we have defined a club class for creating an entry into our database.
Therefore, before adding a new class, an object of class Club must be initialized. Here is the definition of
the Club class:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{class} \PYG{n+nc}{Club}\PYG{p}{:}
    \PYG{k}{def} \PYG{n+nf+fm}{\PYGZus{}\PYGZus{}init\PYGZus{}\PYGZus{}}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{name}\PYG{p}{,} \PYG{n}{faculty}\PYG{p}{,} \PYG{n}{advisor}\PYG{p}{,} \PYG{n}{chairman}\PYG{p}{,} \PYG{n}{vice\PYGZus{}1}\PYG{p}{,} \PYG{n}{vice\PYGZus{}2}\PYG{p}{)}\PYG{p}{:}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{name} \PYG{o}{=} \PYG{n}{name}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{faculty} \PYG{o}{=} \PYG{n}{faculty}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{advisor} \PYG{o}{=} \PYG{n}{advisor}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{chairman} \PYG{o}{=} \PYG{n}{chairman}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{vice\PYGZus{}1} \PYG{o}{=} \PYG{n}{vice\PYGZus{}1}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{vice\PYGZus{}2} \PYG{o}{=} \PYG{n}{vice\PYGZus{}2}
\end{sphinxVerbatim}


\paragraph{Adding}
\label{\detokenize{developer/kaplan:id7}}
Adding a club into the database is pretty straigthforward. You have to pass the object you have initialized
into add\_club() function.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{add\PYGZus{}club}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{club}\PYG{p}{)}\PYG{p}{:}
     \PYG{k}{try}\PYG{p}{:}
         \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
             \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
             \PYG{n}{data} \PYG{o}{=} \PYG{p}{[}\PYG{n}{club}\PYG{o}{.}\PYG{n}{name}\PYG{p}{,} \PYG{n}{club}\PYG{o}{.}\PYG{n}{faculty}\PYG{p}{,} \PYG{n}{club}\PYG{o}{.}\PYG{n}{advisor}\PYG{p}{,} \PYG{n}{club}\PYG{o}{.}\PYG{n}{chairman}\PYG{p}{,} \PYG{n}{club}\PYG{o}{.}\PYG{n}{vice\PYGZus{}1}\PYG{p}{,} \PYG{n}{club}\PYG{o}{.}\PYG{n}{vice\PYGZus{}2}\PYG{p}{]}
             \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{INSERT INTO CLUBS (NAME, FACULTY, ADVISOR, CHAIRMAN, V\PYGZus{}CHAIRMAN\PYGZus{}1, V\PYGZus{}CHAIRMAN\PYGZus{}2) VALUES (}\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{)}\PYG{l+s+s2}{\PYGZdq{}}
             \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{data}\PYG{p}{)}
             \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
     \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
         \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Add Club Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\end{sphinxVerbatim}


\paragraph{Reading}
\label{\detokenize{developer/kaplan:id8}}
There are 3 options to read information from clubs page.

\sphinxstylestrong{get\_club()}

This function takes club id as input and returns the corresponding entry as a list.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{get\PYGZus{}club}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{club\PYGZus{}id}\PYG{p}{)}\PYG{p}{:}
    \PYG{k}{try}\PYG{p}{:}
        \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
            \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SELECT * FROM CLUBS WHERE CLUB\PYGZus{}ID = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{data} \PYG{o}{=} \PYG{p}{[}\PYG{n}{club\PYGZus{}id}\PYG{p}{]}
            \PYG{k}{print}\PYG{p}{(}\PYG{n}{data}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{data}\PYG{p}{)}
            \PYG{n}{datas} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchall}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
            \PYG{k}{return} \PYG{n}{datas}
    \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Get club DB Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}

    \PYG{k}{return} \PYG{n+nb+bp}{None}
\end{sphinxVerbatim}

\sphinxstylestrong{get\_all\_clubs()}

This function returns all the entries as a list of lists.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{get\PYGZus{}all\PYGZus{}clubs}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{)}\PYG{p}{:}
    \PYG{k}{try}\PYG{p}{:}
        \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
            \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SELECT * FROM CLUBS}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{)}
            \PYG{n}{data} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchall}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
            \PYG{k}{return} \PYG{n}{data}

    \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Get Clubs Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}

    \PYG{k}{return} \PYG{n+nb+bp}{None}
\end{sphinxVerbatim}

\sphinxstylestrong{get\_clubs\_info\_astext()}

This function returns all the clubs as a list of dictionaries. Also, since entries include different numbers that corresponds to a key
in a different table, we are using joins in the query so we can return all the related information in a human readable format.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{get\PYGZus{}clubs\PYGZus{}info\PYGZus{}astext}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{)}\PYG{p}{:}
   \PYG{k}{try}\PYG{p}{:}
       \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
           \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
           \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SELECT (c.club\PYGZus{}id, c.name, f.fac\PYGZus{}name, p1.name, p2.name, p3.name, p4.name) FROM clubs c JOIN faculties f ON c.faculty=f.fac\PYGZus{}id JOIN people p1 ON c.advisor=p1.p\PYGZus{}id JOIN people p2 ON c.chairman=p2.p\PYGZus{}id JOIN people p3 ON c.v\PYGZus{}chairman\PYGZus{}1=p3.p\PYGZus{}id JOIN people p4 ON c.v\PYGZus{}chairman\PYGZus{}2=p4.p\PYGZus{}id}\PYG{l+s+s2}{\PYGZdq{}}
           \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{)}
           \PYG{n}{data} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchall}\PYG{p}{(}\PYG{p}{)}
           \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
           \PYG{n}{retval} \PYG{o}{=} \PYG{p}{[}\PYG{p}{]}
           \PYG{k}{for} \PYG{n}{datum} \PYG{o+ow}{in} \PYG{n}{data}\PYG{p}{:}
               \PYG{n}{datum} \PYG{o}{=} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{o}{.}\PYG{n}{lstrip}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{o}{.}\PYG{n}{rstrip}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{)}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{o}{.}\PYG{n}{split}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
               \PYG{n}{val} \PYG{o}{=} \PYG{p}{\PYGZob{}}
                   \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ID}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{,}
                   \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Name}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{o}{.}\PYG{n}{strip}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{,}
                   \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Faculty}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{]}\PYG{o}{.}\PYG{n}{strip}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{,}
                   \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Advisor}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{3}\PYG{p}{]}\PYG{o}{.}\PYG{n}{strip}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{,}
                   \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Chair}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{4}\PYG{p}{]}\PYG{o}{.}\PYG{n}{strip}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{,}
                   \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{VChair1}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{5}\PYG{p}{]}\PYG{o}{.}\PYG{n}{strip}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{,}
                   \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{VChair2}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{6}\PYG{p}{]}\PYG{o}{.}\PYG{n}{strip}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
               \PYG{p}{\PYGZcb{}}
               \PYG{n}{retval}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{val}\PYG{p}{)}
           \PYG{k}{return} \PYG{n}{retval}
   \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
       \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Get Clubs(All Text) DB Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\end{sphinxVerbatim}


\paragraph{Updating}
\label{\detokenize{developer/kaplan:id9}}
To update a club, you have to supply club id, an attributes list and corresponding values. Then, using
this look-up table, corresponding entry in the database gets updated.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{update\PYGZus{}club}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{club\PYGZus{}id}\PYG{p}{,} \PYG{n}{attrs}\PYG{p}{,} \PYG{n}{values}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{attrs\PYGZus{}lookup\PYGZus{}table} \PYG{o}{=} \PYG{p}{\PYGZob{}}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{name}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{NAME}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{faculty}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{FACULTY}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{advisor}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ADVISOR}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{chairman}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{CHAIRMAN}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{vice\PYGZus{}1}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{V\PYGZus{}CHAIRMAN\PYGZus{}1}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{vice\PYGZus{}2}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{V\PYGZus{}CHAIRMAN\PYGZus{}2}\PYG{l+s+s2}{\PYGZdq{}}
    \PYG{p}{\PYGZcb{}}

    \PYG{k}{try}\PYG{p}{:}
        \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
            \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{UPDATE CLUBS SET }\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{attrs}\PYG{p}{)} \PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{:}
                \PYG{n}{statement} \PYG{o}{+}\PYG{o}{=} \PYG{n}{attrs\PYGZus{}lookup\PYGZus{}table}\PYG{p}{[}\PYG{n}{attrs}\PYG{p}{[}\PYG{n}{i}\PYG{p}{]}\PYG{p}{]} \PYG{o}{+} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{ ,}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{statement} \PYG{o}{+}\PYG{o}{=} \PYG{n}{attrs\PYGZus{}lookup\PYGZus{}table}\PYG{p}{[}\PYG{n}{attrs}\PYG{p}{[}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{]} \PYG{o}{+} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{ WHERE CLUB\PYGZus{}ID = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{values}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{club\PYGZus{}id}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{values}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}

    \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Update Club Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\end{sphinxVerbatim}


\paragraph{Deleting}
\label{\detokenize{developer/kaplan:id10}}
To delete a club, you have to supply club id.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{delete\PYGZus{}club}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{club\PYGZus{}id}\PYG{p}{)}\PYG{p}{:}
    \PYG{k}{try}\PYG{p}{:}
        \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
            \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{DELETE FROM CLUBS WHERE CLUB\PYGZus{}ID = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{values} \PYG{o}{=} \PYG{p}{[}\PYG{n}{club\PYGZus{}id}\PYG{p}{]}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{values}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
    \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Delete club error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\end{sphinxVerbatim}


\subsubsection{Departments}
\label{\detokenize{developer/kaplan:departments}}

\paragraph{SQL Table Creation}
\label{\detokenize{developer/kaplan:id11}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{k}{CREATE} \PYG{k}{TABLE} \PYG{k}{IF} \PYG{k}{NOT} \PYG{k}{EXISTS} \PYG{n}{DEPARTMENTS} \PYG{p}{(}
    \PYG{n}{DEP\PYGZus{}ID} \PYG{n+nb}{SERIAL} \PYG{k}{PRIMARY} \PYG{k}{KEY}\PYG{p}{,}
    \PYG{n}{DEP\PYGZus{}NAME} \PYG{n+nb}{VARCHAR}\PYG{p}{(}\PYG{l+m+mi}{100}\PYG{p}{)}\PYG{p}{,}
    \PYG{n}{FACULTY} \PYG{n+nb}{INTEGER}\PYG{p}{,}
    \PYG{n}{BUILDING} \PYG{n+nb}{INTEGER}\PYG{p}{,}
    \PYG{n}{DEAN} \PYG{n+nb}{INTEGER}\PYG{p}{,}
    \PYG{k}{FOREIGN} \PYG{k}{KEY} \PYG{p}{(}\PYG{n}{BUILDING}\PYG{p}{)} \PYG{k}{REFERENCES} \PYG{n}{BUILDINGS}\PYG{p}{(}\PYG{n}{BU\PYGZus{}ID}\PYG{p}{)} \PYG{k}{ON} \PYG{k}{UPDATE} \PYG{k}{CASCADE} \PYG{k}{ON} \PYG{k}{DELETE} \PYG{k}{RESTRICT}\PYG{p}{,}
    \PYG{k}{FOREIGN} \PYG{k}{KEY} \PYG{p}{(}\PYG{n}{FACULTY}\PYG{p}{)} \PYG{k}{REFERENCES} \PYG{n}{FACULTIES}\PYG{p}{(}\PYG{n}{FAC\PYGZus{}ID}\PYG{p}{)} \PYG{k}{ON} \PYG{k}{UPDATE} \PYG{k}{CASCADE} \PYG{k}{ON} \PYG{k}{DELETE} \PYG{k}{RESTRICT}\PYG{p}{,}
    \PYG{k}{FOREIGN} \PYG{k}{KEY} \PYG{p}{(}\PYG{n}{DEAN}\PYG{p}{)} \PYG{k}{REFERENCES} \PYG{n}{PEOPLE}\PYG{p}{(}\PYG{n}{P\PYGZus{}ID}\PYG{p}{)} \PYG{k}{ON} \PYG{k}{UPDATE} \PYG{k}{CASCADE} \PYG{k}{ON} \PYG{k}{DELETE} \PYG{k}{RESTRICT}
\PYG{p}{)}
\end{sphinxVerbatim}


\paragraph{Department Class}
\label{\detokenize{developer/kaplan:department-class}}
Since it makes it easier to create, we have defined a department class for creating an entry into our database.
Therefore, before adding a new department, an object of class Department must be initialized. Here is the definition of
the Department class:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{class} \PYG{n+nc}{Department}\PYG{p}{:}
    \PYG{k}{def} \PYG{n+nf+fm}{\PYGZus{}\PYGZus{}init\PYGZus{}\PYGZus{}}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{name}\PYG{p}{,} \PYG{n}{faculty}\PYG{p}{,} \PYG{n}{building}\PYG{p}{,} \PYG{n}{dean}\PYG{p}{)}\PYG{p}{:}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{name} \PYG{o}{=} \PYG{n}{name}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{faculty} \PYG{o}{=} \PYG{n}{faculty}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{building} \PYG{o}{=} \PYG{n}{building}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{dean} \PYG{o}{=} \PYG{n}{dean}
\end{sphinxVerbatim}


\paragraph{Adding}
\label{\detokenize{developer/kaplan:id12}}
Adding a department into the database is pretty straigthforward. You have to pass the object you have initialized
into add\_department() function.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{add\PYGZus{}department}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{department}\PYG{p}{)}\PYG{p}{:}
    \PYG{k}{try}\PYG{p}{:}
        \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
            \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{data} \PYG{o}{=} \PYG{p}{[}\PYG{n}{department}\PYG{o}{.}\PYG{n}{name}\PYG{p}{,} \PYG{n}{department}\PYG{o}{.}\PYG{n}{faculty}\PYG{p}{,} \PYG{n}{department}\PYG{o}{.}\PYG{n}{building}\PYG{p}{,} \PYG{n}{department}\PYG{o}{.}\PYG{n}{dean}\PYG{p}{]}
            \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{INSERT INTO DEPARTMENTS (DEP\PYGZus{}NAME, FACULTY, BUILDING, DEAN) VALUES (}\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{)}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{data}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
    \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ Add department Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\end{sphinxVerbatim}


\paragraph{Reading}
\label{\detokenize{developer/kaplan:id13}}
There are 3 functions to read an entry or multiple entries from the database.

\sphinxstylestrong{get\_department()}

This function takes department id as an argument and returns the corresponding entry as a list.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{get\PYGZus{}department}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{dep\PYGZus{}id}\PYG{p}{)}\PYG{p}{:}
    \PYG{k}{try}\PYG{p}{:}
        \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
            \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SELECT * FROM DEPARTMENTS WHERE DEP\PYGZus{}ID = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{data} \PYG{o}{=} \PYG{p}{[}\PYG{n}{dep\PYGZus{}id}\PYG{p}{]}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{data}\PYG{p}{)}
            \PYG{n}{datas} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchall}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
            \PYG{k}{return} \PYG{n}{datas}
    \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Get department DB Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}

    \PYG{k}{return} \PYG{n+nb+bp}{None}
\end{sphinxVerbatim}

\sphinxstylestrong{get\_all\_departments()}

This function returns all the entries of departments table as a list of lists.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{get\PYGZus{}all\PYGZus{}departments}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{)}\PYG{p}{:}
    \PYG{k}{try}\PYG{p}{:}
        \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
            \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SELECT * FROM DEPARTMENTS}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{)}
            \PYG{n}{data} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchall}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
            \PYG{k}{return} \PYG{n}{data}
    \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Fetching Departments Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}

    \PYG{k}{return} \PYG{n+nb+bp}{None}
\end{sphinxVerbatim}

\sphinxstylestrong{get\_departments\_text}

This function returns all the entries of departments as a list of dictionaries. To get a human readable result, multiple
joins are used.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{get\PYGZus{}departments\PYGZus{}text}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{)}\PYG{p}{:}
    \PYG{l+s+sd}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}

\PYG{l+s+sd}{    :return: Information as dictionary.}
\PYG{l+s+sd}{    \PYGZdq{}\PYGZdq{}\PYGZdq{}}
    \PYG{k}{try}\PYG{p}{:}
        \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
            \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SELECT * FROM departments INNER JOIN faculties ON departments.faculty = faculties.fac\PYGZus{}id INNER JOIN buildings ON departments.building = buildings.bu\PYGZus{}id INNER JOIN people ON departments.dean = people.p\PYGZus{}id}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{)}
            \PYG{n}{data} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchall}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{retval} \PYG{o}{=} \PYG{p}{[}\PYG{p}{]}
            \PYG{k}{for} \PYG{n}{datum} \PYG{o+ow}{in} \PYG{n}{data}\PYG{p}{:}
                \PYG{n}{val} \PYG{o}{=} \PYG{p}{\PYGZob{}}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ID}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Name}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Faculty}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{6}\PYG{p}{]}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Building}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{12}\PYG{p}{]}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Chair}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{16}\PYG{p}{]}
                \PYG{p}{\PYGZcb{}}
                \PYG{n}{retval}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{val}\PYG{p}{)}
            \PYG{k}{return} \PYG{n}{retval}
    \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Get Departments(All Text) DB Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\end{sphinxVerbatim}


\paragraph{Updating}
\label{\detokenize{developer/kaplan:id14}}
To update a deparment, you have to supply department id, an attributes list and corresponding values. Then, using
this look-up table, corresponding entry in the database gets updated.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{update\PYGZus{}department}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{dep\PYGZus{}id}\PYG{p}{,} \PYG{n}{attrs}\PYG{p}{,} \PYG{n}{values}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{attrs\PYGZus{}lookup\PYGZus{}table} \PYG{o}{=} \PYG{p}{\PYGZob{}}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{name}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{dep\PYGZus{}name}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{faculty}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{faculty}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{building}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{building}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{dean}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{dean}\PYG{l+s+s2}{\PYGZdq{}}
    \PYG{p}{\PYGZcb{}}

    \PYG{k}{try}\PYG{p}{:}
        \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
            \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{UPDATE DEPARTMENTS SET }\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{attrs}\PYG{p}{)} \PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{:}
                \PYG{n}{statement} \PYG{o}{+}\PYG{o}{=} \PYG{n}{attrs\PYGZus{}lookup\PYGZus{}table}\PYG{p}{[}\PYG{n}{attrs}\PYG{p}{[}\PYG{n}{i}\PYG{p}{]}\PYG{p}{]} \PYG{o}{+} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{ ,}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{statement} \PYG{o}{+}\PYG{o}{=} \PYG{n}{attrs\PYGZus{}lookup\PYGZus{}table}\PYG{p}{[}\PYG{n}{attrs}\PYG{p}{[}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{]} \PYG{o}{+} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{ WHERE DEP\PYGZus{}ID = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{values}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{dep\PYGZus{}id}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{values}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}

    \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Update Department Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\end{sphinxVerbatim}


\paragraph{Deleting}
\label{\detokenize{developer/kaplan:id15}}
To delete a department, you have to supply department id.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{delete\PYGZus{}department}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{dep\PYGZus{}id}\PYG{p}{)}\PYG{p}{:}
    \PYG{k}{try}\PYG{p}{:}
        \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
            \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{DELETE FROM DEPARTMENTS WHERE DEP\PYGZus{}ID = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{values} \PYG{o}{=} \PYG{p}{[}\PYG{n}{dep\PYGZus{}id}\PYG{p}{]}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{values}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
    \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Delete Department Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\end{sphinxVerbatim}


\subsubsection{Faculties}
\label{\detokenize{developer/kaplan:faculties}}

\paragraph{SQL Table Creation}
\label{\detokenize{developer/kaplan:id16}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{k}{CREATE} \PYG{k}{TABLE} \PYG{k}{IF} \PYG{k}{NOT} \PYG{k}{EXISTS} \PYG{n}{FACULTIES} \PYG{p}{(}
    \PYG{n}{FAC\PYGZus{}ID} \PYG{n+nb}{SERIAL} \PYG{k}{PRIMARY} \PYG{k}{KEY}\PYG{p}{,}
    \PYG{n}{FAC\PYGZus{}NAME} \PYG{n+nb}{VARCHAR}\PYG{p}{(}\PYG{l+m+mi}{100}\PYG{p}{)} \PYG{k}{NOT} \PYG{k}{NULL}\PYG{p}{,}
    \PYG{n}{FAC\PYGZus{}BUILDING} \PYG{n+nb}{INTEGER}\PYG{p}{,}
    \PYG{n}{DEAN} \PYG{n+nb}{INTEGER} \PYG{k}{NOT} \PYG{k}{NULL}\PYG{p}{,}
    \PYG{n}{DEAN\PYGZus{}ASST\PYGZus{}1} \PYG{n+nb}{INTEGER} \PYG{k}{NOT} \PYG{k}{NULL}\PYG{p}{,}
    \PYG{n}{DEAN\PYGZus{}ASST\PYGZus{}2} \PYG{n+nb}{INTEGER}\PYG{p}{,}
    \PYG{k}{FOREIGN} \PYG{k}{KEY} \PYG{p}{(}\PYG{n}{FAC\PYGZus{}BUILDING}\PYG{p}{)} \PYG{k}{REFERENCES} \PYG{n}{BUILDINGS}\PYG{p}{(}\PYG{n}{BU\PYGZus{}ID}\PYG{p}{)} \PYG{k}{ON} \PYG{k}{UPDATE} \PYG{k}{CASCADE} \PYG{k}{ON} \PYG{k}{DELETE} \PYG{k}{RESTRICT}\PYG{p}{,}
    \PYG{k}{FOREIGN} \PYG{k}{KEY} \PYG{p}{(}\PYG{n}{DEAN}\PYG{p}{)} \PYG{k}{REFERENCES} \PYG{n}{PEOPLE}\PYG{p}{(}\PYG{n}{P\PYGZus{}ID}\PYG{p}{)} \PYG{k}{ON} \PYG{k}{UPDATE} \PYG{k}{CASCADE} \PYG{k}{ON} \PYG{k}{DELETE} \PYG{k}{RESTRICT}\PYG{p}{,}
    \PYG{k}{FOREIGN} \PYG{k}{KEY} \PYG{p}{(}\PYG{n}{DEAN\PYGZus{}ASST\PYGZus{}1}\PYG{p}{)} \PYG{k}{REFERENCES} \PYG{n}{PEOPLE}\PYG{p}{(}\PYG{n}{P\PYGZus{}ID}\PYG{p}{)} \PYG{k}{ON} \PYG{k}{UPDATE} \PYG{k}{CASCADE} \PYG{k}{ON} \PYG{k}{DELETE} \PYG{k}{RESTRICT}\PYG{p}{,}
    \PYG{k}{FOREIGN} \PYG{k}{KEY} \PYG{p}{(}\PYG{n}{DEAN\PYGZus{}ASST\PYGZus{}2}\PYG{p}{)} \PYG{k}{REFERENCES} \PYG{n}{PEOPLE}\PYG{p}{(}\PYG{n}{P\PYGZus{}ID}\PYG{p}{)} \PYG{k}{ON} \PYG{k}{UPDATE} \PYG{k}{CASCADE} \PYG{k}{ON} \PYG{k}{DELETE} \PYG{k}{RESTRICT}
\PYG{p}{)}
\end{sphinxVerbatim}


\paragraph{Faculty Class}
\label{\detokenize{developer/kaplan:faculty-class}}
Since it makes it easier to create, we have defined a faculty class for creating an entry into our database.
Therefore, before adding a new faculty, an object of class Faculty must be initialized. Here is the definition of
the Faculty class:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{class} \PYG{n+nc}{Faculty}\PYG{p}{:}

    \PYG{k}{def} \PYG{n+nf+fm}{\PYGZus{}\PYGZus{}init\PYGZus{}\PYGZus{}}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{name}\PYG{p}{,} \PYG{n}{building}\PYG{p}{,} \PYG{n}{dean}\PYG{p}{,} \PYG{n}{assistant\PYGZus{}dean\PYGZus{}1}\PYG{p}{,} \PYG{n}{assistant\PYGZus{}dean\PYGZus{}2}\PYG{p}{)}\PYG{p}{:}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{name} \PYG{o}{=} \PYG{n}{name}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{building} \PYG{o}{=} \PYG{n}{building}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{dean} \PYG{o}{=} \PYG{n}{dean}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{assistant\PYGZus{}dean\PYGZus{}1} \PYG{o}{=} \PYG{n}{assistant\PYGZus{}dean\PYGZus{}1}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{assistant\PYGZus{}dean\PYGZus{}2} \PYG{o}{=} \PYG{n}{assistant\PYGZus{}dean\PYGZus{}2}
\end{sphinxVerbatim}


\paragraph{Adding}
\label{\detokenize{developer/kaplan:id17}}
Adding a faculty into the database is pretty straigthforward. You have to pass the object you have initialized
into add\_faculty() function.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{add\PYGZus{}faculty}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{faculty}\PYG{p}{)}\PYG{p}{:}
    \PYG{k}{try}\PYG{p}{:}
        \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
            \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{data} \PYG{o}{=} \PYG{p}{[}\PYG{n}{faculty}\PYG{o}{.}\PYG{n}{name}\PYG{p}{,} \PYG{n}{faculty}\PYG{o}{.}\PYG{n}{building}\PYG{p}{,} \PYG{n}{faculty}\PYG{o}{.}\PYG{n}{dean}\PYG{p}{,} \PYG{n}{faculty}\PYG{o}{.}\PYG{n}{assistant\PYGZus{}dean\PYGZus{}1}\PYG{p}{]}
            \PYG{k}{if} \PYG{n}{faculty}\PYG{o}{.}\PYG{n}{assistant\PYGZus{}dean\PYGZus{}2} \PYG{o+ow}{is} \PYG{o+ow}{not} \PYG{n+nb+bp}{None}\PYG{p}{:}
                \PYG{n}{data}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{faculty}\PYG{o}{.}\PYG{n}{assistant\PYGZus{}dean\PYGZus{}2}\PYG{p}{)}
                \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{INSERT INTO FACULTIES (FAC\PYGZus{}NAME, FAC\PYGZus{}BUILDING, DEAN, DEAN\PYGZus{}ASST\PYGZus{}1, DEAN\PYGZus{}ASST\PYGZus{}2) VALUES (}\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{)}\PYG{l+s+s2}{\PYGZdq{}}
                \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{data}\PYG{p}{)}
            \PYG{k}{else}\PYG{p}{:}
                \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{INSERT INTO FACULTIES (FAC\PYGZus{}NAME, FAC\PYGZus{}BUILDING, DEAN, DEAN\PYGZus{}ASST\PYGZus{}1) VALUES (}\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{)}\PYG{l+s+s2}{\PYGZdq{}}
                \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{data}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
    \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Add faculty Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\end{sphinxVerbatim}


\paragraph{Reading}
\label{\detokenize{developer/kaplan:id18}}
There are 4 different functions for reading an entry or multiple entries from the database.

\sphinxstylestrong{get\_faculty}

This function takes faculty id as an argument and returns the corresponding entry as a list.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{get\PYGZus{}faculty}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{fac\PYGZus{}id}\PYG{p}{)}\PYG{p}{:}
   \PYG{l+s+sd}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
\PYG{l+s+sd}{   Gets faculty id as an input, returns query results.}
\PYG{l+s+sd}{   By: Uğur Ali Kaplan\PYGZdq{}\PYGZdq{}\PYGZdq{}}
   \PYG{k}{try}\PYG{p}{:}
       \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
           \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
           \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SELECT * FROM FACULTIES WHERE FAC\PYGZus{}ID = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}}
           \PYG{n}{data} \PYG{o}{=} \PYG{p}{[}\PYG{n}{fac\PYGZus{}id}\PYG{p}{]}
           \PYG{k}{print}\PYG{p}{(}\PYG{n}{data}\PYG{p}{)}
           \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{data}\PYG{p}{)}
           \PYG{n}{datas} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchall}\PYG{p}{(}\PYG{p}{)}
           \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
           \PYG{k}{return} \PYG{n}{datas}
   \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
       \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Get Faculty DB Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}

   \PYG{k}{return} \PYG{n+nb+bp}{None}
\end{sphinxVerbatim}

\sphinxstylestrong{get\_faculties}

This function returns ids, names, buildings the faculties belong to and codes of those buildings
as a list of dictionaries. Joins are used to ensure a human readable form in the return values.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{get\PYGZus{}faculties}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{)}\PYG{p}{:}
    \PYG{l+s+sd}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
\PYG{l+s+sd}{    Joins faculty and buildings table, returns relevant columns as a dictionary.}
\PYG{l+s+sd}{    :return:}

\PYG{l+s+sd}{    By: Uğur Ali Kaplan}
\PYG{l+s+sd}{    \PYGZdq{}\PYGZdq{}\PYGZdq{}}
    \PYG{k}{try}\PYG{p}{:}
        \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
            \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SELECT * FROM faculties INNER JOIN buildings ON faculties.fac\PYGZus{}id = bu\PYGZus{}id}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{)}
            \PYG{n}{data} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchall}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{retval} \PYG{o}{=} \PYG{p}{[}\PYG{p}{]}
            \PYG{k}{for} \PYG{n}{datum} \PYG{o+ow}{in} \PYG{n}{data}\PYG{p}{:}
                \PYG{n}{val} \PYG{o}{=} \PYG{p}{\PYGZob{}}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ID}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Name}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Building Name}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{4}\PYG{p}{]}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Building Code}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{5}\PYG{p}{]}
                \PYG{p}{\PYGZcb{}}
                \PYG{n}{retval}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{val}\PYG{p}{)}
            \PYG{k}{return} \PYG{n}{retval}
    \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Get Faculties DB Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\end{sphinxVerbatim}

\sphinxstylestrong{get\_all\_faculties}

This function returns all the rows of the faculty table as a list of lists.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{get\PYGZus{}all\PYGZus{}faculties}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{)}\PYG{p}{:}
\PYG{k}{try}\PYG{p}{:}
    \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
        \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SELECT * FROM FACULTIES}\PYG{l+s+s2}{\PYGZdq{}}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{)}
        \PYG{n}{data} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchall}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
        \PYG{k}{return} \PYG{n}{data}

\PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
    \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Fetch Faculties Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}

\PYG{k}{return} \PYG{n+nb+bp}{None}
\end{sphinxVerbatim}

\sphinxstylestrong{get\_faculty\_as\_text}

This function returns the information of all the faculties in a human readable form with a list of dictionaries. Each element
of the returned list is a dictionary corresponding to one row of the faculties table.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{get\PYGZus{}faculty\PYGZus{}as\PYGZus{}text}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{)}\PYG{p}{:}
\PYG{k}{try}\PYG{p}{:}
    \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
        \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SELECT (f.fac\PYGZus{}id, f.fac\PYGZus{}name, b.bu\PYGZus{}name, p1.name, p2.name, p3.name) FROM faculties f JOIN buildings b ON f.fac\PYGZus{}building = b.bu\PYGZus{}id JOIN people p1 ON f.dean = p1.p\PYGZus{}id JOIN people p2 ON f.dean\PYGZus{}asst\PYGZus{}1 = p2.p\PYGZus{}id LEFT JOIN people p3 ON f.dean\PYGZus{}asst\PYGZus{}2 = p3.p\PYGZus{}id}\PYG{l+s+s2}{\PYGZdq{}}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{)}
        \PYG{n}{data} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchall}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{retval} \PYG{o}{=} \PYG{p}{[}\PYG{p}{]}
        \PYG{k}{for} \PYG{n}{datum} \PYG{o+ow}{in} \PYG{n}{data}\PYG{p}{:}
            \PYG{n}{datum} \PYG{o}{=} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{o}{.}\PYG{n}{lstrip}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{o}{.}\PYG{n}{rstrip}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{)}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{o}{.}\PYG{n}{split}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
            \PYG{n}{val} \PYG{o}{=} \PYG{p}{\PYGZob{}}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ID}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Name}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{o}{.}\PYG{n}{strip}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Building}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{]}\PYG{o}{.}\PYG{n}{strip}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Dean}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{3}\PYG{p}{]}\PYG{o}{.}\PYG{n}{strip}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{VDean1}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{4}\PYG{p}{]}\PYG{o}{.}\PYG{n}{strip}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{VDean2}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{5}\PYG{p}{]}\PYG{o}{.}\PYG{n}{strip}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
            \PYG{p}{\PYGZcb{}}
            \PYG{n}{retval}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{val}\PYG{p}{)}
        \PYG{k}{return} \PYG{n}{retval}
\PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
    \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Get Faculty Info(The one with the string parsing) DB Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\end{sphinxVerbatim}


\paragraph{Updating}
\label{\detokenize{developer/kaplan:id19}}
To update a faculty, you have to supply faculty id, an attributes list and corresponding values. Then, using
this look-up table, corresponding entry in the database gets updated.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{update\PYGZus{}faculty}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{fac\PYGZus{}id}\PYG{p}{,} \PYG{n}{attrs}\PYG{p}{,} \PYG{n}{values}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{attrs\PYGZus{}lookup\PYGZus{}table} \PYG{o}{=} \PYG{p}{\PYGZob{}}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{name}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{FAC\PYGZus{}NAME}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{building}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{FAC\PYGZus{}BUILDING}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{dean}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{DEAN}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{vdean\PYGZus{}1}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{DEAN\PYGZus{}ASST\PYGZus{}1}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{vdean\PYGZus{}2}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{DEAN\PYGZus{}ASST\PYGZus{}2}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
    \PYG{p}{\PYGZcb{}}

    \PYG{k}{try}\PYG{p}{:}
        \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
            \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{UPDATE FACULTIES SET }\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{attrs}\PYG{p}{)} \PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{:}
                \PYG{n}{statement} \PYG{o}{+}\PYG{o}{=} \PYG{n}{attrs\PYGZus{}lookup\PYGZus{}table}\PYG{p}{[}\PYG{n}{attrs}\PYG{p}{[}\PYG{n}{i}\PYG{p}{]}\PYG{p}{]} \PYG{o}{+} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{ ,}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{statement} \PYG{o}{+}\PYG{o}{=} \PYG{n}{attrs\PYGZus{}lookup\PYGZus{}table}\PYG{p}{[}\PYG{n}{attrs}\PYG{p}{[}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{]} \PYG{o}{+} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{ WHERE FAC\PYGZus{}ID = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{values}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{fac\PYGZus{}id}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{values}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}

    \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Update Faculty Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\end{sphinxVerbatim}


\paragraph{Deleting}
\label{\detokenize{developer/kaplan:id20}}
To delete a faculty, you have to supply faculty id.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{delete\PYGZus{}faculty}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{fac\PYGZus{}id}\PYG{p}{)}\PYG{p}{:}
    \PYG{k}{try}\PYG{p}{:}
        \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
            \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{DELETE FROM FACULTIES WHERE FAC\PYGZus{}ID = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{values} \PYG{o}{=} \PYG{p}{[}\PYG{n}{fac\PYGZus{}id}\PYG{p}{]}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{values}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
    \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Delete Faculty Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\end{sphinxVerbatim}


\subsubsection{Labs}
\label{\detokenize{developer/kaplan:labs}}

\paragraph{SQL Table Creation}
\label{\detokenize{developer/kaplan:id21}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{k}{CREATE} \PYG{k}{TABLE} \PYG{k}{IF} \PYG{k}{NOT} \PYG{k}{EXISTS} \PYG{n}{LABS} \PYG{p}{(}
    \PYG{n}{LAB\PYGZus{}ID} \PYG{n+nb}{SERIAL} \PYG{k}{PRIMARY} \PYG{k}{KEY}\PYG{p}{,}
    \PYG{n}{LAB\PYGZus{}NAME} \PYG{n+nb}{VARCHAR}\PYG{p}{(}\PYG{l+m+mi}{100}\PYG{p}{)} \PYG{k}{UNIQUE}\PYG{p}{,}
    \PYG{n}{DEPARTMENT} \PYG{n+nb}{INTEGER}\PYG{p}{,}
    \PYG{n}{FACULTY} \PYG{n+nb}{INTEGER}\PYG{p}{,}
    \PYG{n}{BUILDING}  \PYG{n+nb}{INTEGER}\PYG{p}{,}
    \PYG{n}{ROOM} \PYG{n+nb}{INTEGER}\PYG{p}{,}
    \PYG{n}{INVESTIGATOR} \PYG{n+nb}{INTEGER} \PYG{k}{NOT} \PYG{k}{NULL}\PYG{p}{,}
    \PYG{k}{FOREIGN} \PYG{k}{KEY} \PYG{p}{(}\PYG{n}{BUILDING}\PYG{p}{)} \PYG{k}{REFERENCES} \PYG{n}{BUILDINGS}\PYG{p}{(}\PYG{n}{BU\PYGZus{}ID}\PYG{p}{)} \PYG{k}{ON} \PYG{k}{UPDATE} \PYG{k}{CASCADE} \PYG{k}{ON} \PYG{k}{DELETE} \PYG{k}{RESTRICT}\PYG{p}{,}
    \PYG{k}{FOREIGN} \PYG{k}{KEY} \PYG{p}{(}\PYG{n}{FACULTY}\PYG{p}{)} \PYG{k}{REFERENCES} \PYG{n}{FACULTIES}\PYG{p}{(}\PYG{n}{FAC\PYGZus{}ID}\PYG{p}{)} \PYG{k}{ON} \PYG{k}{UPDATE} \PYG{k}{CASCADE} \PYG{k}{ON} \PYG{k}{DELETE} \PYG{k}{RESTRICT}\PYG{p}{,}
    \PYG{k}{FOREIGN} \PYG{k}{KEY} \PYG{p}{(}\PYG{n}{DEPARTMENT}\PYG{p}{)} \PYG{k}{REFERENCES} \PYG{n}{DEPARTMENTS}\PYG{p}{(}\PYG{n}{DEP\PYGZus{}ID}\PYG{p}{)} \PYG{k}{ON} \PYG{k}{UPDATE} \PYG{k}{CASCADE} \PYG{k}{ON} \PYG{k}{DELETE} \PYG{k}{RESTRICT}\PYG{p}{,}
    \PYG{k}{FOREIGN} \PYG{k}{KEY} \PYG{p}{(}\PYG{n}{ROOM}\PYG{p}{)} \PYG{k}{REFERENCES} \PYG{n}{ROOMS}\PYG{p}{(}\PYG{n}{ROOM\PYGZus{}ID}\PYG{p}{)} \PYG{k}{ON} \PYG{k}{UPDATE} \PYG{k}{CASCADE} \PYG{k}{ON} \PYG{k}{DELETE} \PYG{k}{RESTRICT}\PYG{p}{,}
    \PYG{k}{FOREIGN} \PYG{k}{KEY} \PYG{p}{(}\PYG{n}{INVESTIGATOR}\PYG{p}{)} \PYG{k}{REFERENCES} \PYG{n}{PEOPLE}\PYG{p}{(}\PYG{n}{P\PYGZus{}ID}\PYG{p}{)} \PYG{k}{ON} \PYG{k}{UPDATE} \PYG{k}{CASCADE} \PYG{k}{ON} \PYG{k}{DELETE} \PYG{k}{RESTRICT}
\PYG{p}{)}
\end{sphinxVerbatim}


\paragraph{Lab Class}
\label{\detokenize{developer/kaplan:lab-class}}
Since it makes it easier to create, we have defined a lab class for creating an entry into our database.
Therefore, before adding a new lab, an object of class Lab must be initialized. Here is the definition of
the Lab class:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{class} \PYG{n+nc}{Lab}\PYG{p}{:}
    \PYG{k}{def} \PYG{n+nf+fm}{\PYGZus{}\PYGZus{}init\PYGZus{}\PYGZus{}}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{name}\PYG{p}{,} \PYG{n}{department}\PYG{p}{,} \PYG{n}{faculty}\PYG{p}{,} \PYG{n}{room}\PYG{p}{,} \PYG{n}{investigator}\PYG{p}{,} \PYG{n}{building}\PYG{p}{)}\PYG{p}{:}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{name} \PYG{o}{=} \PYG{n}{name}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{department} \PYG{o}{=} \PYG{n}{department}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{faculty} \PYG{o}{=} \PYG{n}{faculty}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{room} \PYG{o}{=} \PYG{n}{room}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{investigator} \PYG{o}{=} \PYG{n}{investigator}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{building} \PYG{o}{=} \PYG{n}{building}
\end{sphinxVerbatim}


\paragraph{Adding}
\label{\detokenize{developer/kaplan:id22}}
Adding a lab into the database is pretty straigthforward. You have to pass the object you have initialized
into add\_lab() function.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{add\PYGZus{}lab}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{lab}\PYG{p}{)}\PYG{p}{:}
   \PYG{k}{try}\PYG{p}{:}
       \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
           \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
           \PYG{n}{data} \PYG{o}{=} \PYG{p}{[}\PYG{n}{lab}\PYG{o}{.}\PYG{n}{name}\PYG{p}{,} \PYG{n}{lab}\PYG{o}{.}\PYG{n}{department}\PYG{p}{,} \PYG{n}{lab}\PYG{o}{.}\PYG{n}{faculty}\PYG{p}{,} \PYG{n}{lab}\PYG{o}{.}\PYG{n}{building}\PYG{p}{,} \PYG{n}{lab}\PYG{o}{.}\PYG{n}{room}\PYG{p}{,} \PYG{n}{lab}\PYG{o}{.}\PYG{n}{investigator}\PYG{p}{]}
           \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{INSERT INTO LABS (LAB\PYGZus{}NAME, DEPARTMENT, FACULTY, BUILDING, ROOM, INVESTIGATOR) VALUES (}\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{)}\PYG{l+s+s2}{\PYGZdq{}}
           \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{data}\PYG{p}{)}
           \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
   \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
       \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Add lab Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\end{sphinxVerbatim}


\paragraph{Reading}
\label{\detokenize{developer/kaplan:id23}}
There are 3 different functions that reads from the labs table.

\sphinxstylestrong{get\_lab}

This function returns the row corresponding to given lab id as a list.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{get\PYGZus{}lab}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{lab\PYGZus{}id}\PYG{p}{)}\PYG{p}{:}
    \PYG{k}{try}\PYG{p}{:}
        \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
            \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SELECT * FROM LABS WHERE LAB\PYGZus{}ID = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{data} \PYG{o}{=} \PYG{p}{[}\PYG{n}{lab\PYGZus{}id}\PYG{p}{]}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{data}\PYG{p}{)}
            \PYG{n}{datas} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchall}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
            \PYG{k}{return} \PYG{n}{datas}
    \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Get Lab DB Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}

    \PYG{k}{return} \PYG{n+nb+bp}{None}
\end{sphinxVerbatim}

\sphinxstylestrong{get\_all\_labs}

This function returns all the labs as a list of lists.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{get\PYGZus{}all\PYGZus{}labs}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{)}\PYG{p}{:}
    \PYG{k}{try}\PYG{p}{:}
        \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
            \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SELECT * FROM LABS}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{)}
            \PYG{n}{data} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchall}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
            \PYG{k}{return} \PYG{n}{data}
    \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Delete lab Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}

    \PYG{k}{return} \PYG{n+nb+bp}{None}
\end{sphinxVerbatim}

\sphinxstylestrong{get\_lab\_info}

This function returns all the rows of labs table as a list of dictionaries. To achieve a human readable form in the returned dictionaries,
multiple joins are used in the select statement.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{get\PYGZus{}lab\PYGZus{}info}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{)}\PYG{p}{:}
    \PYG{k}{try}\PYG{p}{:}
        \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
            \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SELECT (l.lab\PYGZus{}id, l.lab\PYGZus{}name, d.dep\PYGZus{}name, f.fac\PYGZus{}name, b.bu\PYGZus{}name, r.room\PYGZus{}name, p.name) FROM labs l JOIN departments d ON l.department=d.dep\PYGZus{}id JOIN faculties f ON l.faculty = f.fac\PYGZus{}id JOIN buildings b ON l.building=b.bu\PYGZus{}id JOIN rooms r ON l.room = r.room\PYGZus{}id JOIN people p ON l.investigator=p.p\PYGZus{}id}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{)}
            \PYG{n}{data} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchall}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{retval} \PYG{o}{=} \PYG{p}{[}\PYG{p}{]}
            \PYG{k}{for} \PYG{n}{datum} \PYG{o+ow}{in} \PYG{n}{data}\PYG{p}{:}
                \PYG{n}{datum} \PYG{o}{=} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{o}{.}\PYG{n}{lstrip}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{o}{.}\PYG{n}{rstrip}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{)}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{o}{.}\PYG{n}{split}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
                \PYG{n}{val} \PYG{o}{=} \PYG{p}{\PYGZob{}}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ID}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Name}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{o}{.}\PYG{n}{strip}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Department}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{]}\PYG{o}{.}\PYG{n}{strip}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Faculty}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{3}\PYG{p}{]}\PYG{o}{.}\PYG{n}{strip}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Building}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{4}\PYG{p}{]}\PYG{o}{.}\PYG{n}{strip}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Room}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{5}\PYG{p}{]}\PYG{o}{.}\PYG{n}{strip}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Investigator}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{6}\PYG{p}{]}\PYG{o}{.}\PYG{n}{strip}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
                \PYG{p}{\PYGZcb{}}
                \PYG{n}{retval}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{val}\PYG{p}{)}
            \PYG{k}{return} \PYG{n}{retval}
    \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Get Lab Info(The one with the string parsing) DB Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\end{sphinxVerbatim}


\paragraph{Updating}
\label{\detokenize{developer/kaplan:id24}}
To update a lab, you have to supply lab id, an attributes list and corresponding values. Then, using
this look-up table, corresponding entry in the database gets updated.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{update\PYGZus{}lab}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{lab\PYGZus{}id}\PYG{p}{,} \PYG{n}{attrs}\PYG{p}{,} \PYG{n}{values}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{attrs\PYGZus{}lookup\PYGZus{}table} \PYG{o}{=} \PYG{p}{\PYGZob{}}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{name}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{LAB\PYGZus{}NAME}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{department}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{DEPARTMENT}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{faculty}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{FACULTY}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{building}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{BUILDING}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{room}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ROOM}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{investigator}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{INVESTIGATOR}\PYG{l+s+s2}{\PYGZdq{}}
    \PYG{p}{\PYGZcb{}}

    \PYG{k}{try}\PYG{p}{:}
        \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
            \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{UPDATE LABS SET }\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{attrs}\PYG{p}{)} \PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{:}
                \PYG{n}{statement} \PYG{o}{+}\PYG{o}{=} \PYG{n}{attrs\PYGZus{}lookup\PYGZus{}table}\PYG{p}{[}\PYG{n}{attrs}\PYG{p}{[}\PYG{n}{i}\PYG{p}{]}\PYG{p}{]} \PYG{o}{+} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{ ,}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{statement} \PYG{o}{+}\PYG{o}{=} \PYG{n}{attrs\PYGZus{}lookup\PYGZus{}table}\PYG{p}{[}\PYG{n}{attrs}\PYG{p}{[}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{]} \PYG{o}{+} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{ WHERE LAB\PYGZus{}ID = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{values}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{lab\PYGZus{}id}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{values}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}

    \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Update lab Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\end{sphinxVerbatim}


\paragraph{Deleting}
\label{\detokenize{developer/kaplan:id25}}
To delete a lab, you have to supply lab id.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{delete\PYGZus{}lab}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{lab\PYGZus{}id}\PYG{p}{)}\PYG{p}{:}
    \PYG{k}{try}\PYG{p}{:}
        \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
            \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{DELETE FROM LABS WHERE LAB\PYGZus{}ID = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{values} \PYG{o}{=} \PYG{p}{[}\PYG{n}{lab\PYGZus{}id}\PYG{p}{]}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{values}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
    \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Delete lab Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\end{sphinxVerbatim}


\subparagraph{Papers}
\label{\detokenize{developer/kaplan:papers}}

\paragraph{SQL Table Creation}
\label{\detokenize{developer/kaplan:id26}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{k}{CREATE} \PYG{k}{TABLE} \PYG{k}{IF} \PYG{k}{NOT} \PYG{k}{EXISTS} \PYG{n}{PAPERS} \PYG{p}{(}
    \PYG{n}{PAPER\PYGZus{}ID} \PYG{n+nb}{SERIAL} \PYG{k}{PRIMARY} \PYG{k}{KEY}\PYG{p}{,}
    \PYG{n}{TITLE} \PYG{n+nb}{VARCHAR} \PYG{p}{(}\PYG{l+m+mi}{100}\PYG{p}{)}\PYG{p}{,}
    \PYG{n}{PLAT} \PYG{n+nb}{VARCHAR}\PYG{p}{(}\PYG{l+m+mi}{100}\PYG{p}{)}\PYG{p}{,}
    \PYG{n}{CITATION\PYGZus{}COUNT} \PYG{n+nb}{INTEGER} \PYG{k}{DEFAULT} \PYG{l+m+mi}{0}\PYG{p}{,}
    \PYG{n}{AUTHOR} \PYG{n+nb}{INTEGER}\PYG{p}{,}
    \PYG{n}{CONFERENCE} \PYG{n+nb}{BOOLEAN} \PYG{k}{NOT} \PYG{k}{NULL}\PYG{p}{,}
    \PYG{k}{FOREIGN} \PYG{k}{KEY} \PYG{p}{(}\PYG{n}{AUTHOR}\PYG{p}{)} \PYG{k}{REFERENCES} \PYG{n}{PEOPLE}\PYG{p}{(}\PYG{n}{P\PYGZus{}ID}\PYG{p}{)} \PYG{k}{ON} \PYG{k}{UPDATE} \PYG{k}{CASCADE} \PYG{k}{ON} \PYG{k}{DELETE} \PYG{k}{RESTRICT}
\PYG{p}{)}
\end{sphinxVerbatim}


\paragraph{Paper Class}
\label{\detokenize{developer/kaplan:paper-class}}
Since it makes it easier to create, we have defined a paper class for creating an entry into our database.
Therefore, before adding a new paper an object of class Paper must be initialized. Here is the definition of
the Paper class:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{class} \PYG{n+nc}{Paper}\PYG{p}{:}
    \PYG{k}{def} \PYG{n+nf+fm}{\PYGZus{}\PYGZus{}init\PYGZus{}\PYGZus{}}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{title}\PYG{p}{,} \PYG{n}{platform}\PYG{p}{,} \PYG{n}{citation}\PYG{p}{,} \PYG{n}{author}\PYG{p}{,} \PYG{n}{isConference}\PYG{p}{)}\PYG{p}{:}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{title} \PYG{o}{=} \PYG{n}{title}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{platform} \PYG{o}{=} \PYG{n}{platform}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{citation} \PYG{o}{=} \PYG{n}{citation}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{author} \PYG{o}{=} \PYG{n}{author}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{isConference} \PYG{o}{=} \PYG{n}{isConference}
\end{sphinxVerbatim}


\paragraph{Adding}
\label{\detokenize{developer/kaplan:id27}}
Adding a paper into the database is pretty straigthforward. You have to pass the object you have initialized
into add\_paper() function.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{add\PYGZus{}paper}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{paper}\PYG{p}{)}\PYG{p}{:}
    \PYG{k}{try}\PYG{p}{:}
        \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
            \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{data} \PYG{o}{=} \PYG{p}{[}\PYG{n}{paper}\PYG{o}{.}\PYG{n}{title}\PYG{p}{,} \PYG{n}{paper}\PYG{o}{.}\PYG{n}{platform}\PYG{p}{,} \PYG{n}{paper}\PYG{o}{.}\PYG{n}{citation}\PYG{p}{,} \PYG{n}{paper}\PYG{o}{.}\PYG{n}{author}\PYG{p}{,} \PYG{n}{paper}\PYG{o}{.}\PYG{n}{isConference}\PYG{p}{]}
            \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{INSERT INTO PAPERS (TITLE, PLAT, CITATION\PYGZus{}COUNT, AUTHOR, CONFERENCE) VALUES (}\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{)}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{data}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
    \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Add Paper Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\end{sphinxVerbatim}


\paragraph{Reading}
\label{\detokenize{developer/kaplan:id28}}
There are different methods for reading entries from the database.

\sphinxstylestrong{get\_authors}

This function returns all the people in the database that has a written paper in the database as a list
of dictionaries.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{get\PYGZus{}authors}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{)}\PYG{p}{:}
    \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
        \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SELECT DISTINCT author, name from papers join people on author=p\PYGZus{}id;}\PYG{l+s+s2}{\PYGZdq{}}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{)}
        \PYG{n}{data} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchall}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{retval} \PYG{o}{=} \PYG{p}{[}\PYG{p}{]}
        \PYG{k}{for} \PYG{n}{datum} \PYG{o+ow}{in} \PYG{n}{data}\PYG{p}{:}
            \PYG{n}{val} \PYG{o}{=} \PYG{p}{\PYGZob{}}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ID}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Name}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}
            \PYG{p}{\PYGZcb{}}
            \PYG{n}{retval}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{val}\PYG{p}{)}
        \PYG{k}{return} \PYG{n}{retval}
\end{sphinxVerbatim}

\sphinxstylestrong{get\_paper}

This function returns the relevant entry from the papers table according to given paper id as a list.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{get\PYGZus{}paper}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{paper\PYGZus{}id}\PYG{p}{)}\PYG{p}{:}
    \PYG{k}{try}\PYG{p}{:}
        \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
            \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SELECT * FROM PAPERS WHERE PAPER\PYGZus{}ID = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{data} \PYG{o}{=} \PYG{p}{[}\PYG{n}{paper\PYGZus{}id}\PYG{p}{]}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{data}\PYG{p}{)}
            \PYG{n}{data} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchall}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
            \PYG{k}{return} \PYG{n}{data}
    \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Get paper DB Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}

    \PYG{k}{return} \PYG{n+nb+bp}{None}
\end{sphinxVerbatim}

\sphinxstylestrong{get\_paper\_by\_author}

This function returns all the papers written by a given author as a list of dictionaries. You have to supply person id
to this function. First, it fetches all the papers written by this author. Then, it gets the papers with the same title from the
database and determines if there are other authors and adds them to the authors list. Since we use inner join for this, if there
is a single author, author list stays empty. Therefore, we check the length of the authors list and add the name of the given person.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{get\PYGZus{}paper\PYGZus{}by\PYGZus{}author}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{person}\PYG{p}{)}\PYG{p}{:}
    \PYG{k}{try}\PYG{p}{:}
        \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
            \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SELECT (paper\PYGZus{}id, title, plat, citation\PYGZus{}count, conference) FROM papers WHERE papers.author = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{data} \PYG{o}{=} \PYG{p}{[}\PYG{n}{person}\PYG{p}{]}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{data}\PYG{p}{)}
            \PYG{n}{data} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchall}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{retval} \PYG{o}{=} \PYG{p}{[}\PYG{p}{]}
            \PYG{k}{for} \PYG{n}{datum} \PYG{o+ow}{in} \PYG{n}{data}\PYG{p}{:}
                \PYG{n}{datum} \PYG{o}{=} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{o}{.}\PYG{n}{lstrip}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{o}{.}\PYG{n}{rstrip}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{)}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{o}{.}\PYG{n}{split}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
                \PYG{n}{val} \PYG{o}{=} \PYG{p}{\PYGZob{}}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ID}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Title}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{o}{.}\PYG{n}{strip}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Platform}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{]}\PYG{o}{.}\PYG{n}{strip}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Citation}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{3}\PYG{p}{]}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Conference}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{4}\PYG{p}{]}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Authors}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{[}\PYG{p}{]}
                \PYG{p}{\PYGZcb{}}

                \PYG{k}{if} \PYG{n}{val}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Conference}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{==} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{t}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}
                    \PYG{n}{val}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Conference}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{n+nb+bp}{True}
                \PYG{k}{else}\PYG{p}{:}
                    \PYG{n}{val}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Conference}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{n+nb+bp}{False}

                \PYG{n}{retval}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{val}\PYG{p}{)}

            \PYG{k}{for} \PYG{n}{val} \PYG{o+ow}{in} \PYG{n}{retval}\PYG{p}{:}
                \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
                \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SELECT name FROM papers p1 JOIN papers p2 ON p1.title = p2.title JOIN people p3 ON p3.p\PYGZus{}id = p1.author WHERE p1.author \PYGZlt{}\PYGZgt{} p2.author AND p1.title = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}}
                \PYG{n}{data} \PYG{o}{=} \PYG{p}{[}\PYG{n}{val}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Title}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{]}
                \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{data}\PYG{p}{)}
                \PYG{n}{data} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchall}\PYG{p}{(}\PYG{p}{)}
                \PYG{k}{for} \PYG{n}{datum} \PYG{o+ow}{in} \PYG{n}{data}\PYG{p}{:}
                    \PYG{n}{val}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Authors}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{datum}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{)}
                \PYG{n}{val}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Authors}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{n+nb}{list}\PYG{p}{(}\PYG{n+nb}{set}\PYG{p}{(}\PYG{n}{val}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Authors}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{)}\PYG{p}{)}
                \PYG{k}{if} \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{val}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Authors}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{)} \PYG{o}{==} \PYG{l+m+mi}{0}\PYG{p}{:}
                    \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SELECT name FROM papers p1 JOIN people p2 ON p1.author=p2.p\PYGZus{}id WHERE title = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}}
                    \PYG{n}{data} \PYG{o}{=} \PYG{p}{[}\PYG{n}{val}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Title}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{]}
                    \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{data}\PYG{p}{)}
                    \PYG{n}{data} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchall}\PYG{p}{(}\PYG{p}{)}
                    \PYG{n}{val}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Authors}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{data}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{)}
                \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}

            \PYG{k}{return} \PYG{n}{retval}
    \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Get Paper by Author DB Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\end{sphinxVerbatim}


\paragraph{Updating}
\label{\detokenize{developer/kaplan:id29}}
To update a paper, you have to supply paper id, an attributes list and corresponding values. Then, using
this look-up table, corresponding entry in the database gets updated.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{update\PYGZus{}paper}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{paper\PYGZus{}id}\PYG{p}{,} \PYG{n}{attrs}\PYG{p}{,} \PYG{n}{values}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{attrs\PYGZus{}lookup\PYGZus{}table} \PYG{o}{=} \PYG{p}{\PYGZob{}}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{title}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{TITLE}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{platform}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{PLAT}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{citation}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{CITATION\PYGZus{}COUNT}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{author}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{AUTHOR}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{isConference}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{CONFERENCE}\PYG{l+s+s2}{\PYGZdq{}}
    \PYG{p}{\PYGZcb{}}

    \PYG{k}{try}\PYG{p}{:}
        \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
            \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{UPDATE PAPERS SET }\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{attrs}\PYG{p}{)} \PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{:}
                \PYG{n}{statement} \PYG{o}{+}\PYG{o}{=} \PYG{n}{attrs\PYGZus{}lookup\PYGZus{}table}\PYG{p}{[}\PYG{n}{attrs}\PYG{p}{[}\PYG{n}{i}\PYG{p}{]}\PYG{p}{]} \PYG{o}{+} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{ ,}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{statement} \PYG{o}{+}\PYG{o}{=} \PYG{n}{attrs\PYGZus{}lookup\PYGZus{}table}\PYG{p}{[}\PYG{n}{attrs}\PYG{p}{[}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{]} \PYG{o}{+} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{ WHERE PAPER\PYGZus{}ID = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{values}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{paper\PYGZus{}id}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{values}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}

    \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Update Paper Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\end{sphinxVerbatim}


\paragraph{Deleting}
\label{\detokenize{developer/kaplan:id30}}
To delete a paper, you have to supply paper id.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{delete\PYGZus{}paper}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{paper\PYGZus{}id}\PYG{p}{)}\PYG{p}{:}
    \PYG{k}{try}\PYG{p}{:}
        \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
            \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{DELETE FROM PAPERS WHERE PAPER\PYGZus{}ID = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{values} \PYG{o}{=} \PYG{p}{[}\PYG{n}{paper\PYGZus{}id}\PYG{p}{]}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{values}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
    \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Delete paper error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\end{sphinxVerbatim}


\subsection{Parts Implemented by Mehmet Altuner}
\label{\detokenize{developer/mehmet:parts-implemented-by-mehmet-altuner}}\label{\detokenize{developer/mehmet::doc}}

\subsubsection{People}
\label{\detokenize{developer/mehmet:people}}
\begin{sphinxadmonition}{note}{Note:}
All table creations exist in db\_init.py file.
\end{sphinxadmonition}

\begin{sphinxadmonition}{note}{Note:}
All SQL operations in python files are wrapped with try-except statements in order to avoid and validate errors
\end{sphinxadmonition}


\paragraph{1. Creation}
\label{\detokenize{developer/mehmet:creation}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{k}{CREATE} \PYG{k}{TABLE} \PYG{k}{IF} \PYG{k}{NOT} \PYG{k}{EXISTS} \PYG{n}{PEOPLE} \PYG{p}{(}
\PYG{n}{P\PYGZus{}ID} \PYG{n+nb}{SERIAL} \PYG{k}{PRIMARY} \PYG{k}{KEY}\PYG{p}{,}
\PYG{n}{NAME} \PYG{n+nb}{VARCHAR}\PYG{p}{(}\PYG{l+m+mi}{100}\PYG{p}{)}\PYG{p}{,}
\PYG{n}{EMAIL} \PYG{n+nb}{VARCHAR}\PYG{p}{(}\PYG{l+m+mi}{120}\PYG{p}{)} \PYG{k}{UNIQUE}\PYG{p}{,}
\PYG{n}{PHOTO} \PYG{n+nb}{VARCHAR}\PYG{p}{(}\PYG{l+m+mi}{120}\PYG{p}{)}\PYG{p}{,}
\PYG{n}{PASSWORD} \PYG{n+nb}{VARCHAR}\PYG{p}{(}\PYG{l+m+mi}{280}\PYG{p}{)}\PYG{p}{,}
\PYG{k}{TYPE} \PYG{n+nb}{VARCHAR}\PYG{p}{(}\PYG{l+m+mi}{120}\PYG{p}{)}
    \PYG{p}{)}
\end{sphinxVerbatim}


\paragraph{2. Adding}
\label{\detokenize{developer/mehmet:adding}}
Adding new person is handled in \sphinxstyleemphasis{add\_person()} method in \sphinxstyleemphasis{database.py} file

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{add\PYGZus{}person}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{person}\PYG{p}{)}\PYG{p}{:}
\PYG{k}{try}\PYG{p}{:}
    \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
        \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{INSERT INTO PEOPLE (NAME, EMAIL, PHOTO, PASSWORD, TYPE) VALUES (}\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{)}\PYG{l+s+s2}{\PYGZdq{}}
        \PYG{n}{data} \PYG{o}{=} \PYG{p}{[}\PYG{n}{person}\PYG{o}{.}\PYG{n}{name}\PYG{p}{,} \PYG{n}{person}\PYG{o}{.}\PYG{n}{mail}\PYG{p}{,} \PYG{n}{person}\PYG{o}{.}\PYG{n}{photo}\PYG{p}{,} \PYG{n}{person}\PYG{o}{.}\PYG{n}{password}\PYG{p}{,} \PYG{n}{person}\PYG{o}{.}\PYG{n}{type}\PYG{p}{]}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{data}\PYG{p}{)}
        \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SELECT P\PYGZus{}ID FROM PEOPLE WHERE EMAIL = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}}
        \PYG{n}{data} \PYG{o}{=} \PYG{p}{[}\PYG{n}{person}\PYG{o}{.}\PYG{n}{mail}\PYG{p}{]}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{data}\PYG{p}{)}
        \PYG{n}{value} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchone}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{person}\PYG{o}{.}\PYG{n}{id} \PYG{o}{=} \PYG{n}{value}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
\PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
    \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Add Person Error : }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}

\PYG{k}{return} \PYG{n}{person}
\end{sphinxVerbatim}

\sphinxstyleemphasis{add\_person()} method takes a \sphinxstyleemphasis{people} object as a parameter named \sphinxstyleemphasis{person}. (Person object is defined in models/people.py).
After inserting the new value into the table, its auto-incremented id instance is selected by another statement and written into the person instance to be used in the future.

\begin{sphinxadmonition}{warning}{Warning:}
The email instance is unique
\end{sphinxadmonition}


\paragraph{3. Reading}
\label{\detokenize{developer/mehmet:reading}}
Reading from person table is implemented in the method \sphinxstyleemphasis{get\_person()} in \sphinxstyleemphasis{database.py} file.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{get\PYGZus{}person}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{p\PYGZus{}id}\PYG{p}{)}\PYG{p}{:}
\PYG{k}{try}\PYG{p}{:}
    \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
        \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SELECT * FROM PEOPLE WHERE P\PYGZus{}ID = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}}
        \PYG{n}{data} \PYG{o}{=} \PYG{p}{[}\PYG{n}{p\PYGZus{}id}\PYG{p}{]}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{data}\PYG{p}{)}
        \PYG{n}{value} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchone}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
        \PYG{k}{if} \PYG{o+ow}{not} \PYG{n}{value}\PYG{p}{:}
            \PYG{k}{return} \PYG{n+nb+bp}{None}
        \PYG{n}{person} \PYG{o}{=} \PYG{n}{People}\PYG{p}{(}\PYG{n}{value}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{,} \PYG{n}{value}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{,} \PYG{n}{value}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{]}\PYG{p}{,} \PYG{n}{value}\PYG{p}{[}\PYG{l+m+mi}{3}\PYG{p}{]}\PYG{p}{)}
        \PYG{k}{return} \PYG{n}{person}
\PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
    \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}

\PYG{k}{return} \PYG{n+nb+bp}{None}
\end{sphinxVerbatim}

\sphinxstyleemphasis{get\_person()} method takes an integer named \sphinxstyleemphasis{p\_id} and returns the data of the column having the id equal to*p\_id*.


\paragraph{4. Updating}
\label{\detokenize{developer/mehmet:updating}}
Deleting operation is handled in the method \sphinxstyleemphasis{update\_person()} in \sphinxstyleemphasis{database.py} file.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{update\PYGZus{}person}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{person\PYGZus{}id}\PYG{p}{,} \PYG{n}{attrs}\PYG{p}{,} \PYG{n}{values}\PYG{p}{)}\PYG{p}{:}
\PYG{n}{person} \PYG{o}{=} \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{get\PYGZus{}person}\PYG{p}{(}\PYG{n}{person\PYGZus{}id}\PYG{p}{)}
\PYG{k}{if} \PYG{o+ow}{not} \PYG{n}{person}\PYG{p}{:}
    \PYG{k}{return} \PYG{n+nb+bp}{False}

\PYG{k}{if} \PYG{n}{person}\PYG{p}{:}
    \PYG{k}{try}\PYG{p}{:}
        \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
            \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{UPDATE PEOPLE SET }\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{k}{for} \PYG{n}{attr} \PYG{o+ow}{in} \PYG{n}{attrs}\PYG{p}{[}\PYG{p}{:}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{:}
                \PYG{n}{statement} \PYG{o}{+}\PYG{o}{=} \PYG{n}{attr} \PYG{o}{+} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{ , }\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{statement} \PYG{o}{+}\PYG{o}{=} \PYG{n}{attrs}\PYG{p}{[}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{p}{]} \PYG{o}{+} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{ }\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{statement} \PYG{o}{+}\PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ WHERE p\PYGZus{}id = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{values}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{person\PYGZus{}id}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{values}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
    \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Update Person Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\end{sphinxVerbatim}
\begin{description}
\item[{The structure of this method is a bit different than other operations’ methods. It takes three parameters:}] \leavevmode\begin{itemize}
\item {} 
person\_id: An integer that states the person column to be updated.

\item {} 
attrs: A list of names of the attributes that we want to update.

\item {} 
values: The new values of the person object.

\end{itemize}

\end{description}

The idea is that each instance of list \sphinxstyleemphasis{attr} must coincide with the each instance of the list \sphinxstyleemphasis{values}.
\sphinxstyleemphasis{UPDATE PEOPLE SET person.attrs{[}i{]} = values{[}i{]} where id = p\_id}


\paragraph{4. Deleting}
\label{\detokenize{developer/mehmet:deleting}}
By the nature of the table itself, there is no need to implement a deletion operation for this table. It is simply a base class. We have stated \sphinxstyleemphasis{ON DELETE CASCADE} on each table we reference people from.


\subsubsection{Students}
\label{\detokenize{developer/mehmet:students}}

\paragraph{1. Creation}
\label{\detokenize{developer/mehmet:id1}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{k}{CREATE} \PYG{k}{TABLE} \PYG{k}{IF} \PYG{k}{NOT} \PYG{k}{EXISTS} \PYG{n}{STUDENTS} \PYG{p}{(}
\PYG{n}{STU\PYGZus{}ID} \PYG{n+nb}{INTEGER} \PYG{k}{PRIMARY} \PYG{k}{KEY} \PYG{p}{,}
\PYG{n+nb}{NUMBER} \PYG{n+nb}{INTEGER}\PYG{p}{,}
\PYG{n}{EARNED\PYGZus{}CREDITS} \PYG{n+nb}{INTEGER}\PYG{p}{,}
\PYG{n}{DEPARTMENT} \PYG{n+nb}{INTEGER} \PYG{k}{NOT} \PYG{k}{NULL}\PYG{p}{,}
\PYG{n}{FACULTY} \PYG{n+nb}{INTEGER} \PYG{k}{NOT} \PYG{k}{NULL}\PYG{p}{,}
\PYG{n}{CLUB} \PYG{n+nb}{INTEGER}\PYG{p}{,}
\PYG{n}{LAB} \PYG{n+nb}{INTEGER}\PYG{p}{,}
\PYG{k}{FOREIGN} \PYG{k}{KEY} \PYG{p}{(}\PYG{n}{STU\PYGZus{}ID}\PYG{p}{)} \PYG{k}{REFERENCES} \PYG{n}{PEOPLE} \PYG{k}{ON} \PYG{k}{DELETE} \PYG{k}{CASCADE}\PYG{p}{,}
\PYG{k}{FOREIGN} \PYG{k}{KEY} \PYG{p}{(}\PYG{n}{DEPARTMENT}\PYG{p}{)} \PYG{k}{REFERENCES} \PYG{n}{DEPARTMENTS}\PYG{p}{,}
\PYG{k}{FOREIGN} \PYG{k}{KEY} \PYG{p}{(}\PYG{n}{FACULTY}\PYG{p}{)} \PYG{k}{REFERENCES} \PYG{n}{FACULTIES}\PYG{p}{,}
\PYG{k}{FOREIGN} \PYG{k}{KEY} \PYG{p}{(}\PYG{n}{CLUB}\PYG{p}{)} \PYG{k}{REFERENCES} \PYG{n}{CLUBS}\PYG{p}{,}
\PYG{k}{FOREIGN} \PYG{k}{KEY} \PYG{p}{(}\PYG{n}{LAB}\PYG{p}{)} \PYG{k}{REFERENCES} \PYG{n}{LABS}
\PYG{p}{)}
\end{sphinxVerbatim}

\begin{sphinxadmonition}{warning}{Warning:}
Student’s pkey is also the fkey for the People table since People can only be students if they are students.
\end{sphinxadmonition}


\paragraph{2. Adding}
\label{\detokenize{developer/mehmet:id2}}
Adding operation is handled in the method \sphinxstyleemphasis{add\_student()} in \sphinxstyleemphasis{database.py} file.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{add\PYGZus{}student}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{student}\PYG{p}{)}\PYG{p}{:}
\PYG{n}{person} \PYG{o}{=} \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{add\PYGZus{}person}\PYG{p}{(}\PYG{n}{student}\PYG{o}{.}\PYG{n}{get\PYGZus{}person\PYGZus{}obj}\PYG{p}{(}\PYG{p}{)}\PYG{p}{)}
\PYG{k}{try}\PYG{p}{:}
    \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
        \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}

        \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{INSERT INTO STUDENTS (STU\PYGZus{}ID, NUMBER, EARNED\PYGZus{}CREDITS, DEPARTMENT, FACULTY, CLUB, LAB) VALUES (}\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{)}\PYG{l+s+s2}{\PYGZdq{}}
        \PYG{n}{data} \PYG{o}{=} \PYG{p}{[}\PYG{n}{person}\PYG{o}{.}\PYG{n}{id}\PYG{p}{,} \PYG{n}{student}\PYG{o}{.}\PYG{n}{number}\PYG{p}{,} \PYG{n}{student}\PYG{o}{.}\PYG{n}{cred}\PYG{p}{,} \PYG{n}{student}\PYG{o}{.}\PYG{n}{depart}\PYG{p}{,} \PYG{n}{student}\PYG{o}{.}\PYG{n}{facu}\PYG{p}{,} \PYG{n}{student}\PYG{o}{.}\PYG{n}{club}\PYG{p}{,}
                \PYG{n}{student}\PYG{o}{.}\PYG{n}{lab}\PYG{p}{]}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{data}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
\PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
    \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\end{sphinxVerbatim}


\paragraph{3. Reading}
\label{\detokenize{developer/mehmet:id3}}
Reading operation is handled in the method \sphinxstyleemphasis{get\_student()} in \sphinxstyleemphasis{database.py} file.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{get\PYGZus{}student}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{stu\PYGZus{}id}\PYG{p}{)}\PYG{p}{:}
\PYG{k}{try}\PYG{p}{:}
    \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
        \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SELECT * FROM STUDENTS WHERE STU\PYGZus{}ID = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}}
        \PYG{n}{values} \PYG{o}{=} \PYG{p}{[}\PYG{n}{stu\PYGZus{}id}\PYG{p}{]}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{values}\PYG{p}{)}
        \PYG{n}{data} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchone}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
        \PYG{k}{return} \PYG{n}{data}
\PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
    \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Get Student Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}

\PYG{k}{return} \PYG{n+nb+bp}{None}
\end{sphinxVerbatim}

Selects the student that has the id as same as the stu\_id which are taken by a parameter.


\paragraph{4. Updating}
\label{\detokenize{developer/mehmet:id4}}
Updating operation is handled in the method \sphinxstyleemphasis{update\_student()} in \sphinxstyleemphasis{database.py} file.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{update\PYGZus{}student}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{student\PYGZus{}key}\PYG{p}{,} \PYG{n}{attrs}\PYG{p}{,} \PYG{n}{values}\PYG{p}{)}\PYG{p}{:}
\PYG{n}{student} \PYG{o}{=} \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{get\PYGZus{}student}\PYG{p}{(}\PYG{n}{student\PYGZus{}key}\PYG{p}{)}
\PYG{k}{if} \PYG{o+ow}{not} \PYG{n}{student}\PYG{p}{:}
    \PYG{k}{return} \PYG{n+nb+bp}{False}

\PYG{k}{if} \PYG{n}{student}\PYG{p}{:}
    \PYG{k}{try}\PYG{p}{:}
        \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
            \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{UPDATE STUDENTS SET }\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{k}{for} \PYG{n}{attr} \PYG{o+ow}{in} \PYG{n}{attrs}\PYG{p}{[}\PYG{p}{:}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{:}
                \PYG{n}{statement} \PYG{o}{+}\PYG{o}{=} \PYG{n}{attr} \PYG{o}{+} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{ , }\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{statement} \PYG{o}{+}\PYG{o}{=} \PYG{n}{attrs}\PYG{p}{[}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{p}{]} \PYG{o}{+} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{ }\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{statement} \PYG{o}{+}\PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ WHERE stu\PYGZus{}id = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{values}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{student\PYGZus{}key}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{values}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
    \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Update Student Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\end{sphinxVerbatim}

The same approach is followed as the update operation of the People table.
\sphinxstyleemphasis{UPDATE STUDENTS SET students.attr{[}i{]} = values{[}i{]} where stu\_id = student\_key}


\paragraph{5. Deleting}
\label{\detokenize{developer/mehmet:id5}}
Updating operation is handled in the method \sphinxstyleemphasis{delete\_student()} in \sphinxstyleemphasis{database.py} file.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{delete\PYGZus{}student}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{student\PYGZus{}key}\PYG{p}{)}\PYG{p}{:}
\PYG{n}{student} \PYG{o}{=} \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{get\PYGZus{}student}\PYG{p}{(}\PYG{n}{student\PYGZus{}key}\PYG{p}{)}

\PYG{k}{if} \PYG{n}{student}\PYG{p}{:}
    \PYG{k}{try}\PYG{p}{:}
        \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
            \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
            \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{DELETE FROM STUDENTS WHERE stu\PYGZus{}id = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{values} \PYG{o}{=} \PYG{p}{[}\PYG{n}{student\PYGZus{}key}\PYG{p}{]}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{values}\PYG{p}{)}
            \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
    \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Delete Student Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\end{sphinxVerbatim}

\begin{sphinxadmonition}{warning}{Warning:}
If you delete a student, the People instance it references to is also deleted.
\end{sphinxadmonition}


\subsubsection{Lessons}
\label{\detokenize{developer/mehmet:lessons}}

\paragraph{1. Creation}
\label{\detokenize{developer/mehmet:id6}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{CREATE} \PYG{k}{TABLE} \PYG{k}{IF} \PYG{k}{NOT} \PYG{k}{EXISTS} \PYG{n}{LESSONS} \PYG{p}{(}
    \PYG{n}{LESSON\PYGZus{}ID} \PYG{n+nb}{SERIAL} \PYG{k}{PRIMARY} \PYG{k}{KEY}\PYG{p}{,}
    \PYG{n}{CAP} \PYG{n+nb}{INTEGER}\PYG{p}{,}
    \PYG{n}{ENROLLED} \PYG{n+nb}{INTEGER}\PYG{p}{,}
    \PYG{n+nb}{DATE} \PYG{n+nb}{VARCHAR}\PYG{p}{(}\PYG{l+m+mi}{280}\PYG{p}{)}\PYG{p}{,}
    \PYG{n}{CRN} \PYG{n+nb}{INTEGER} \PYG{k}{UNIQUE} \PYG{k}{NOT} \PYG{k}{NULL}\PYG{p}{,}
    \PYG{n}{CODE} \PYG{n+nb}{VARCHAR}\PYG{p}{(}\PYG{l+m+mi}{7}\PYG{p}{)}\PYG{p}{,}
    \PYG{n}{INSTRUCTOR} \PYG{n+nb}{INTEGER}\PYG{p}{,}
    \PYG{k}{LOCATION} \PYG{n+nb}{INTEGER}\PYG{p}{,}
    \PYG{n}{ASSISTANT} \PYG{n+nb}{INTEGER}\PYG{p}{,}
    \PYG{n}{CREDIT} \PYG{n+nb}{INTEGER}\PYG{p}{,}
    \PYG{k}{FOREIGN} \PYG{k}{KEY} \PYG{p}{(}\PYG{n}{INSTRUCTOR}\PYG{p}{)} \PYG{k}{REFERENCES} \PYG{n}{INSTRUCTORS}\PYG{p}{(}\PYG{n}{INS\PYGZus{}ID}\PYG{p}{)}\PYG{p}{,}
    \PYG{k}{FOREIGN} \PYG{k}{KEY} \PYG{p}{(}\PYG{n}{ASSISTANT}\PYG{p}{)} \PYG{k}{REFERENCES} \PYG{n}{ASSISTANTS}\PYG{p}{(}\PYG{n}{AS\PYGZus{}ID}\PYG{p}{)}\PYG{p}{,}
    \PYG{k}{FOREIGN} \PYG{k}{KEY} \PYG{p}{(}\PYG{k}{LOCATION}\PYG{p}{)} \PYG{k}{REFERENCES} \PYG{n}{CLASSES}\PYG{p}{(}\PYG{n}{CL\PYGZus{}ID}\PYG{p}{)}
    \PYG{p}{)}
\end{sphinxVerbatim}


\paragraph{2. Adding}
\label{\detokenize{developer/mehmet:id7}}
Adding operation is handled in the method \sphinxstyleemphasis{create\_lesson()} in \sphinxstyleemphasis{database.py} file.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{create\PYGZus{}lesson}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{lesson}\PYG{p}{)}\PYG{p}{:}
\PYG{k}{try}\PYG{p}{:}
    \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
        \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}\PYG{l+s+s2}{INSERT INTO LESSONS (CRN, DATE, CODE, INSTRUCTOR, LOCATION, ASSISTANT, CREDIT, CAP, ENROLLED)}
\PYG{l+s+s2}{                        VALUES(}\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{)}\PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
        \PYG{n}{values} \PYG{o}{=} \PYG{p}{[}\PYG{n}{lesson}\PYG{o}{.}\PYG{n}{crn}\PYG{p}{,} \PYG{n}{lesson}\PYG{o}{.}\PYG{n}{date}\PYG{p}{,} \PYG{n}{lesson}\PYG{o}{.}\PYG{n}{code}\PYG{p}{,} \PYG{n}{lesson}\PYG{o}{.}\PYG{n}{instructor}\PYG{p}{,} \PYG{n}{lesson}\PYG{o}{.}\PYG{n}{location}\PYG{p}{,} \PYG{n}{lesson}\PYG{o}{.}\PYG{n}{assistant}\PYG{p}{,} \PYG{n}{lesson}\PYG{o}{.}\PYG{n}{credit}\PYG{p}{,} \PYG{n}{lesson}\PYG{o}{.}\PYG{n}{cap}\PYG{p}{,} \PYG{n}{lesson}\PYG{o}{.}\PYG{n}{enrolled}\PYG{p}{]}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{values}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
        \PYG{k}{return} \PYG{n+nb+bp}{True}

\PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
    \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Create Lesson Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}

\PYG{k}{return} \PYG{n+nb+bp}{False}
\end{sphinxVerbatim}


\paragraph{3. Reading}
\label{\detokenize{developer/mehmet:id8}}
Reading operation is handled in the methods \sphinxstyleemphasis{search\_lesson\_by\_crn()} and \sphinxstyleemphasis{search\_lesson\_by\_instructor()} in \sphinxstyleemphasis{database.py} file.
The obvious difference between the methods is that one of them selects the lessons by the given CRN while the other does the same operation with the name of its instructor.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{search\PYGZus{}lesson\PYGZus{}by\PYGZus{}crn}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{crn}\PYG{p}{)}\PYG{p}{:}
\PYG{k}{try}\PYG{p}{:}
    \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
        \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}\PYG{l+s+s2}{SELECT * FROM LESSONS}
\PYG{l+s+s2}{        JOIN INSTRUCTORS ON (LESSONS.instructor = INSTRUCTORS.ins\PYGZus{}id)}
\PYG{l+s+s2}{        JOIN PEOPLE ON (INSTRUCTORS.ins\PYGZus{}id = PEOPLE.p\PYGZus{}id)}
\PYG{l+s+s2}{        JOIN CLASSES ON (LESSONS.location = CLASSES.cl\PYGZus{}id)}
\PYG{l+s+s2}{        WHERE LESSONS.crn = }\PYG{l+s+si}{\PYGZpc{}s}
\PYG{l+s+s2}{        }\PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
        \PYG{n}{values} \PYG{o}{=} \PYG{p}{[}\PYG{n}{crn}\PYG{p}{]}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{values}\PYG{p}{)}
        \PYG{n}{data} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchall}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
        \PYG{k}{return} \PYG{n}{data}

\PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
    \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Search Lesson Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}

\PYG{k}{return} \PYG{n+nb+bp}{False}
\end{sphinxVerbatim}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{search\PYGZus{}lesson\PYGZus{}by\PYGZus{}instructor}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{instructor}\PYG{p}{)}\PYG{p}{:}
\PYG{k}{try}\PYG{p}{:}
    \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
        \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}\PYG{l+s+s2}{SELECT * FROM}
\PYG{l+s+s2}{        LESSONS}
\PYG{l+s+s2}{        JOIN INSTRUCTORS ON (LESSONS.instructor = INSTRUCTORS.ins\PYGZus{}id)}
\PYG{l+s+s2}{        JOIN PEOPLE ON (INSTRUCTORS.ins\PYGZus{}id = PEOPLE.p\PYGZus{}id)}
\PYG{l+s+s2}{        JOIN CLASSES ON (LESSONS.location = CLASSES.cl\PYGZus{}id)}
\PYG{l+s+s2}{        WHERE PEOPLE.name = }\PYG{l+s+si}{\PYGZpc{}s}
\PYG{l+s+s2}{        }\PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
        \PYG{n}{values} \PYG{o}{=} \PYG{p}{[}\PYG{n}{instructor}\PYG{p}{]}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{n}{values}\PYG{p}{)}
        \PYG{n}{data} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchall}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
        \PYG{k}{return} \PYG{n}{data}

\PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{err}\PYG{p}{:}
    \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Search Lesson Error: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{err}\PYG{p}{)}
\end{sphinxVerbatim}

Here in both of the methods. JOIN operations are used.



\renewcommand{\indexname}{Index}
\printindex
\end{document}